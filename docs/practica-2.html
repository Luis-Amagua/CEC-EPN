<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Práctica 2 | Control Estadístico de la Calidad</title>
  <meta name="description" content="Prácticas de la asignatura de Control Estadistico de la Calidad." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Práctica 2 | Control Estadístico de la Calidad" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Prácticas de la asignatura de Control Estadistico de la Calidad." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Práctica 2 | Control Estadístico de la Calidad" />
  
  <meta name="twitter:description" content="Prácticas de la asignatura de Control Estadistico de la Calidad." />
  

<meta name="author" content="Miguel Flores Sánchez (miguel.flores@epn.edu.ec)" />


<meta name="date" content="2019-09-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="practica-1.html"/>
<link rel="next" href="practica-3.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Control Estadistico de la Calidad </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prólogo</a></li>
<li class="part"><span><b>I Teoria</b></span></li>
<li class="chapter" data-level="1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html"><i class="fa fa-check"></i><b>1</b> Control Estadistico de la Calidad</a><ul>
<li class="chapter" data-level="1.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#cec-y-seis-sigma-alternativas-en-r"><i class="fa fa-check"></i><b>1.1</b> CEC y seis Sigma: Alternativas en <em>R</em></a></li>
<li class="chapter" data-level="1.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#etapa-definir"><i class="fa fa-check"></i><b>1.2</b> Etapa <strong>DEFINIR</strong></a><ul>
<li class="chapter" data-level="1.2.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#mapa-de-procesos"><i class="fa fa-check"></i><b>1.2.1</b> Mapa de Procesos</a></li>
<li class="chapter" data-level="1.2.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#diagrama-de-ishikawa-o-espina-de-pescado"><i class="fa fa-check"></i><b>1.2.2</b> Diagrama de Ishikawa o espina de pescado</a></li>
<li class="chapter" data-level="1.2.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#diagrama-de-pareto"><i class="fa fa-check"></i><b>1.2.3</b> Diagrama de Pareto</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#epata-analizar-anova"><i class="fa fa-check"></i><b>1.3</b> Epata <strong>ANALIZAR</strong>: ANOVA</a><ul>
<li class="chapter" data-level="1.3.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#introduccion"><i class="fa fa-check"></i><b>1.3.1</b> Introducción</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#etapa-medir"><i class="fa fa-check"></i><b>1.4</b> Etapa <strong>MEDIR</strong></a><ul>
<li class="chapter" data-level="1.4.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#estudios-rr"><i class="fa fa-check"></i><b>1.4.1</b> Estudios R&amp;R</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#etapa-control"><i class="fa fa-check"></i><b>1.5</b> Etapa <strong>CONTROL</strong>:</a><ul>
<li class="chapter" data-level="1.5.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#graficos-de-control"><i class="fa fa-check"></i><b>1.5.1</b> Gráficos de control</a></li>
<li class="chapter" data-level="1.5.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#graficos-de-control-por-variables"><i class="fa fa-check"></i><b>1.5.2</b> Graficos de control por variables</a></li>
<li class="chapter" data-level="1.5.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#graficos-de-control-para-atributos"><i class="fa fa-check"></i><b>1.5.3</b> Gráficos de control para atributos</a></li>
<li class="chapter" data-level="1.5.4" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#otros-graficos-de-control-univariante"><i class="fa fa-check"></i><b>1.5.4</b> Otros graficos de Control univariante</a></li>
<li class="chapter" data-level="1.5.5" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#curvas-oc"><i class="fa fa-check"></i><b>1.5.5</b> Curvas OC</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#etapa-analizar-analisis-de-capacidad"><i class="fa fa-check"></i><b>1.6</b> Etapa <strong>ANALIZAR</strong>: Analisis de capacidad</a><ul>
<li class="chapter" data-level="1.6.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#introduccion-1"><i class="fa fa-check"></i><b>1.6.1</b> Introducción</a></li>
<li class="chapter" data-level="1.6.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#indices-de-capacidad"><i class="fa fa-check"></i><b>1.6.2</b> Indices de capacidad</a></li>
<li class="chapter" data-level="1.6.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#analisis-de-capacidad-en-r"><i class="fa fa-check"></i><b>1.6.3</b> Analisis de capacidad en R</a></li>
<li class="chapter" data-level="1.6.4" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#analisis-de-capacidad-con-datos-no-normales"><i class="fa fa-check"></i><b>1.6.4</b> Análisis de capacidad con datos no normales</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#etapa-controlar-y-analizar"><i class="fa fa-check"></i><b>1.7</b> Etapa <strong>CONTROLAR</strong> y <strong>ANALIZAR</strong></a><ul>
<li class="chapter" data-level="1.7.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#cec-multivariante-reduccion-de-la-dimencion"><i class="fa fa-check"></i><b>1.7.1</b> CEC multivariante: Reducción de la Dimención</a></li>
<li class="chapter" data-level="1.7.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#cec-para-variables-autocorrelacionadas"><i class="fa fa-check"></i><b>1.7.2</b> CEC para variables autocorrelacionadas</a></li>
<li class="chapter" data-level="1.7.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#analisis-de-capacidad-para-datos-autocorrelados"><i class="fa fa-check"></i><b>1.7.3</b> Análisis de capacidad para datos autocorrelados</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#introduccion-al-diseno-de-experimentos-con-r"><i class="fa fa-check"></i><b>1.8</b> Introducción al diseño de experimentos con R</a><ul>
<li class="chapter" data-level="1.8.1" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#ejemplos-de-contrastes-anova"><i class="fa fa-check"></i><b>1.8.1</b> Ejemplos de contrastes ANOVA</a></li>
<li class="chapter" data-level="1.8.2" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#diseno-de-experimentos-factorial-2k"><i class="fa fa-check"></i><b>1.8.2</b> Diseño de experimentos factorial <span class="math inline">\(2^k\)</span></a></li>
<li class="chapter" data-level="1.8.3" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#diseno-de-experimentos-factoriales-fraccionarios"><i class="fa fa-check"></i><b>1.8.3</b> Diseño de experimentos factoriales fraccionarios</a></li>
<li class="chapter" data-level="1.8.4" data-path="control-estadistico-de-la-calidad.html"><a href="control-estadistico-de-la-calidad.html#estudios-interlaboratorios"><i class="fa fa-check"></i><b>1.8.4</b> Estudios Interlaboratorios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Practicas</b></span></li>
<li class="chapter" data-level="2" data-path="practica-1.html"><a href="practica-1.html"><i class="fa fa-check"></i><b>2</b> Práctica 1</a><ul>
<li class="chapter" data-level="2.1" data-path="practica-1.html"><a href="practica-1.html#cec-y-seis-signa-alternativas-en-r"><i class="fa fa-check"></i><b>2.1</b> CEC y Seis Signa: alternativas en R</a></li>
<li class="chapter" data-level="2.2" data-path="practica-1.html"><a href="practica-1.html#etapa-definir-mapas-de-procesos-ishikawa-pareto"><i class="fa fa-check"></i><b>2.2</b> Etapa <em>DEFINIR</em>: Mapas de procesos, Ishikawa, Pareto</a><ul>
<li class="chapter" data-level="2.2.1" data-path="practica-1.html"><a href="practica-1.html#pizza"><i class="fa fa-check"></i><b>2.2.1</b> Mapas de procesos</a></li>
<li class="chapter" data-level="2.2.2" data-path="practica-1.html"><a href="practica-1.html#ishikawa"><i class="fa fa-check"></i><b>2.2.2</b> DIAGRAMA DE ISHIKAWA</a></li>
<li class="chapter" data-level="2.2.3" data-path="practica-1.html"><a href="practica-1.html#par"><i class="fa fa-check"></i><b>2.2.3</b> DIAGRAMA DE PARETO</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="practica-1.html"><a href="practica-1.html#anova"><i class="fa fa-check"></i><b>2.3</b> Etapa <em>ANALIZAR</em>: ANOVA</a></li>
<li class="chapter" data-level="2.4" data-path="practica-1.html"><a href="practica-1.html#RyR"><i class="fa fa-check"></i><b>2.4</b> Etapa <em>MEDIR</em>: Estudios R&amp;R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="practica-2.html"><a href="practica-2.html"><i class="fa fa-check"></i><b>3</b> Práctica 2</a><ul>
<li class="chapter" data-level="3.1" data-path="practica-2.html"><a href="practica-2.html#graficos-de-control-1"><i class="fa fa-check"></i><b>3.1</b> Gráficos de Control</a></li>
<li class="chapter" data-level="3.2" data-path="practica-2.html"><a href="practica-2.html#graficos-de-control-por-variables-1"><i class="fa fa-check"></i><b>3.2</b> Gráficos de Control por variables</a><ul>
<li class="chapter" data-level="3.2.1" data-path="practica-2.html"><a href="practica-2.html#gqcc"><i class="fa fa-check"></i><b>3.2.1</b> Gráficos qcc para variables</a></li>
<li class="chapter" data-level="3.2.2" data-path="practica-2.html"><a href="practica-2.html#grafico-de-control-para-el-rango-y-la-media-datos-plates"><i class="fa fa-check"></i><b>3.2.2</b> Gráfico de control para el RANGO y la MEDIA: datos “plates”</a></li>
<li class="chapter" data-level="3.2.3" data-path="practica-2.html"><a href="practica-2.html#renderizado"><i class="fa fa-check"></i><b>3.2.3</b> Grafico de control para valores individuales de las variables</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="practica-2.html"><a href="practica-2.html#graficos-de-control-por-atributos"><i class="fa fa-check"></i><b>3.3</b> Gráficos de control por atributos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="practica-2.html"><a href="practica-2.html#P"><i class="fa fa-check"></i><b>3.3.1</b> Gráficos p</a></li>
<li class="chapter" data-level="3.3.2" data-path="practica-2.html"><a href="practica-2.html#np"><i class="fa fa-check"></i><b>3.3.2</b> Gráfico tipo np</a></li>
<li class="chapter" data-level="3.3.3" data-path="practica-2.html"><a href="practica-2.html#gc"><i class="fa fa-check"></i><b>3.3.3</b> Gráficos C</a></li>
<li class="chapter" data-level="3.3.4" data-path="practica-2.html"><a href="practica-2.html#gu"><i class="fa fa-check"></i><b>3.3.4</b> Gráficos U</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="practica-2.html"><a href="practica-2.html#otros-graficos-de-control-cusum-y-ewma"><i class="fa fa-check"></i><b>3.4</b> Otros gráficos de Control: CUSUM y EWMA</a><ul>
<li class="chapter" data-level="3.4.1" data-path="practica-2.html"><a href="practica-2.html#cusum"><i class="fa fa-check"></i><b>3.4.1</b> GRÀFICOS CUSUM</a></li>
<li class="chapter" data-level="3.4.2" data-path="practica-2.html"><a href="practica-2.html#ewma"><i class="fa fa-check"></i><b>3.4.2</b> GRÁFICOS EWMA</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="practica-2.html"><a href="practica-2.html#oc"><i class="fa fa-check"></i><b>3.5</b> CURVAS OC</a><ul>
<li class="chapter" data-level="3.5.1" data-path="practica-2.html"><a href="practica-2.html#curvas-oc-para-grafica-de-variables"><i class="fa fa-check"></i><b>3.5.1</b> Curvas OC para gráfica de variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="practica-3.html"><a href="practica-3.html"><i class="fa fa-check"></i><b>4</b> Práctica 3</a><ul>
<li class="chapter" data-level="4.1" data-path="practica-3.html"><a href="practica-3.html#etapa-analizar-analisis-de-la-capacidad"><i class="fa fa-check"></i><b>4.1</b> Etapa <em>ANALIZAR</em>: Análisis de la capacidad</a><ul>
<li class="chapter" data-level="4.1.1" data-path="practica-3.html"><a href="practica-3.html#analisis-de-capacidad-con-r"><i class="fa fa-check"></i><b>4.1.1</b> Análisis de capacidad con R:</a></li>
<li class="chapter" data-level="4.1.2" data-path="practica-3.html"><a href="practica-3.html#analisis-de-la-capacidad-con-datos-no-normales"><i class="fa fa-check"></i><b>4.1.2</b> Análisis de la capacidad con datos no normales</a></li>
<li class="chapter" data-level="4.1.3" data-path="practica-3.html"><a href="practica-3.html#Piedra"><i class="fa fa-check"></i><b>4.1.3</b> Caso Práctico</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="practica-4.html"><a href="practica-4.html"><i class="fa fa-check"></i><b>5</b> Práctica 4</a><ul>
<li class="chapter" data-level="5.1" data-path="practica-4.html"><a href="practica-4.html#etapa-controlar-y-analizar-1"><i class="fa fa-check"></i><b>5.1</b> Etapa Controlar y Analizar</a><ul>
<li class="chapter" data-level="5.1.1" data-path="practica-4.html"><a href="practica-4.html#control-estadistico-de-calidad-multivariante"><i class="fa fa-check"></i><b>5.1.1</b> Control Estadistico de Calidad Multivariante:</a></li>
<li class="chapter" data-level="5.1.2" data-path="practica-4.html"><a href="practica-4.html#control-de-calidad-de-variables-autocorreladas"><i class="fa fa-check"></i><b>5.1.2</b> Control de Calidad de variables autocorreladas</a></li>
<li class="chapter" data-level="5.1.3" data-path="practica-4.html"><a href="practica-4.html#autocorr"><i class="fa fa-check"></i><b>5.1.3</b> Análisis de capacidad con datos autocorrelados.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="practica-5.html"><a href="practica-5.html"><i class="fa fa-check"></i><b>6</b> Práctica 5</a><ul>
<li class="chapter" data-level="6.1" data-path="practica-5.html"><a href="practica-5.html#introduccion-al-diseno-de-experimentos-con-r-1"><i class="fa fa-check"></i><b>6.1</b> Introducción al diseño de experimentos con R</a><ul>
<li class="chapter" data-level="6.1.1" data-path="practica-5.html"><a href="practica-5.html#ejemplos-de-pruebas-anova"><i class="fa fa-check"></i><b>6.1.1</b> Ejemplos de Pruebas ANOVA</a></li>
<li class="chapter" data-level="6.1.2" data-path="practica-5.html"><a href="practica-5.html#disenos-factoriales"><i class="fa fa-check"></i><b>6.1.2</b> DISEÑOS FACTORIALES</a></li>
<li class="chapter" data-level="6.1.3" data-path="practica-5.html"><a href="practica-5.html#disenos-de-experimentos-factoriales-fraccionados"><i class="fa fa-check"></i><b>6.1.3</b> DISEÑOS DE EXPERIMENTOS FACTORIALES FRACCIONADOS</a></li>
<li class="chapter" data-level="6.1.4" data-path="practica-5.html"><a href="practica-5.html#estudios-interlaboratorio-caso-particular-de-doe-y-estudios-rr"><i class="fa fa-check"></i><b>6.1.4</b> ESTUDIOS INTERLABORATORIO (CASO PARTICULAR DE DOE Y ESTUDIOS R&amp;R)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Control Estadístico de la Calidad</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="practica-2" class="section level1">
<h1><span class="header-section-number">Capítulo 3</span> Práctica 2</h1>
<div id="graficos-de-control-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Gráficos de Control</h2>
<p>En esta práctica se obtendrán gráficos de control para variables y atributos utilizando dos paquetes: “qcc” y “qcr”.</p>
<p>Para trabajar con casi todas las funciones y aplicaciones que existen dentro de este paquete estadástico, debemos crear un objeto qcc.</p>
<p>Necesitamos básicamente dos cosas:
Unos datos (un data frame, una matriz, un vector,..) y un “string value” especificando el tipo de control que deseamos hacer (por Atributos o por variables).</p>
<p>También, opcionalmente, se pueden modificar el tamaño (sizes), el centro del grupo (center), la desviación estándar (std.dev), los limites de control (limits), el valor objetivo del proceso(target).</p>
<p>La única diferencia que existe a la hora de trabajar con variables o con atributos, radica en “type”. Para variables podemos optar por elegir entre “xbar”,“xbar.one”, “R” o “S” y para atributos tenemos “p”, “np”,“c”,“u” o “g”.</p>
</div>
<div id="graficos-de-control-por-variables-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Gráficos de Control por variables</h2>
<div id="gqcc" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Gráficos qcc para variables</h3>
<p>Vamos a trabajar con dos bases de datos:
1. “pistonrings”, definida en el paquete qcc.
2. “plates”, definida en el paquete qcr.
Medidas de dureza de planchas de piedra artificial.</p>
<p>Estos datos están sacados del libro de MONTGOMERY .Son medidas del diámetro interior de anillos forjados para los pistones que se usan en los motores de los coches. Las variables que aparecen en el estudio son:</p>
<ul>
<li>diameter, es el diámetro de los pistones</li>
<li>sample = 1,2,3,…40 representa el número de la muestra y de cada muestra tenemos 5 observaciones.</li>
<li>Trial, es la prueba realizada (T-F)</li>
</ul>
<p>Para cargar los datos pistongrings:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(qcc)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">data</span>(pistonrings) <span class="co"># Se carga la base de datos pistonrings</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">attach</span>(pistonrings) <span class="co"># Se toman las columnas de la base de datos como variables</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">dim</span>(pistonrings) <span class="co"># 200 datos, 3 variables</span></a></code></pre></div>
<pre><code>## [1] 200   3</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Creacion del objeto qcc.groups o grupos qcc:</span></a>
<a class="sourceLine" id="cb3-2" title="2">diameter &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(pistonrings<span class="op">$</span>diameter, pistonrings<span class="op">$</span>sample)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># Se agrupan los valores de los diámetros según el valor de la columna &quot;Sample&quot; </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co"># Como hay 200 valores en 40 muestras, el resultado es una matriz 40x5 (200/5=40)</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7">diameter</a></code></pre></div>
<pre><code>##      [,1]   [,2]   [,3]   [,4]   [,5]
## 1  74.030 74.002 74.019 73.992 74.008
## 2  73.995 73.992 74.001 74.011 74.004
## 3  73.988 74.024 74.021 74.005 74.002
## 4  74.002 73.996 73.993 74.015 74.009
## 5  73.992 74.007 74.015 73.989 74.014
## 6  74.009 73.994 73.997 73.985 73.993
## 7  73.995 74.006 73.994 74.000 74.005
## 8  73.985 74.003 73.993 74.015 73.988
## 9  74.008 73.995 74.009 74.005 74.004
## 10 73.998 74.000 73.990 74.007 73.995
## 11 73.994 73.998 73.994 73.995 73.990
## 12 74.004 74.000 74.007 74.000 73.996
## 13 73.983 74.002 73.998 73.997 74.012
## 14 74.006 73.967 73.994 74.000 73.984
## 15 74.012 74.014 73.998 73.999 74.007
## 16 74.000 73.984 74.005 73.998 73.996
## 17 73.994 74.012 73.986 74.005 74.007
## 18 74.006 74.010 74.018 74.003 74.000
## 19 73.984 74.002 74.003 74.005 73.997
## 20 74.000 74.010 74.013 74.020 74.003
## 21 73.988 74.001 74.009 74.005 73.996
## 22 74.004 73.999 73.990 74.006 74.009
## 23 74.010 73.989 73.990 74.009 74.014
## 24 74.015 74.008 73.993 74.000 74.010
## 25 73.982 73.984 73.995 74.017 74.013
## 26 74.012 74.015 74.030 73.986 74.000
## 27 73.995 74.010 73.990 74.015 74.001
## 28 73.987 73.999 73.985 74.000 73.990
## 29 74.008 74.010 74.003 73.991 74.006
## 30 74.003 74.000 74.001 73.986 73.997
## 31 73.994 74.003 74.015 74.020 74.004
## 32 74.008 74.002 74.018 73.995 74.005
## 33 74.001 74.004 73.990 73.996 73.998
## 34 74.015 74.000 74.016 74.025 74.000
## 35 74.030 74.005 74.000 74.016 74.012
## 36 74.001 73.990 73.995 74.010 74.024
## 37 74.015 74.020 74.024 74.005 74.019
## 38 74.035 74.010 74.012 74.015 74.026
## 39 74.017 74.013 74.036 74.025 74.026
## 40 74.010 74.005 74.029 74.000 74.020</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">dim</span>(diameter)</a></code></pre></div>
<pre><code>## [1] 40  5</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#efectivamente es una matriz de 40 filas y 5 columnas</span></a></code></pre></div>
<p>Para cargar los datos “plates” hay dos alternativas: Importándolo a R a partir del archivo Ejercicio1.r</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">Ejercicio1=<span class="kw">read.table</span>(<span class="st">&quot;Ejercicio1.r&quot;</span>,<span class="dt">header=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">names</span>(Ejercicio1)</a></code></pre></div>
<pre><code>## [1] &quot;dureza&quot; &quot;sample&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">dim</span>(Ejercicio1)</a></code></pre></div>
<pre><code>## [1] 250   2</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Acto seguido se define el objeto qcc.groups:</span></a>
<a class="sourceLine" id="cb12-2" title="2">Dureza &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(Ejercicio1<span class="op">$</span>dureza, Ejercicio1<span class="op">$</span>sample)</a></code></pre></div>
<p>O cargándolo desde el paquete qcr (que ya lleva incorporado el dataframe)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">data</span>(plates)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">str</span>(plates) <span class="co"># Variables de las que se compone plates</span></a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    250 obs. of  2 variables:
##  $ hardness: num  138 181 213 207 184 ...
##  $ sample  : int  1 1 1 1 1 2 2 2 2 2 ...</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># dureza: vector numúrico, dureza de las planchas.</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="co"># sample: identificador de la muestra, 1,2,3,...50 </span></a></code></pre></div>
</div>
<div id="grafico-de-control-para-el-rango-y-la-media-datos-plates" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Gráfico de control para el RANGO y la MEDIA: datos “plates”</h3>
<p>IMPORTANTE. Para construir un gráfico de control de la media, primero hay que observar los diagramas de rangos o desviaciones tipicas (antes que los diagramas de la media).
Es debido a que los rangos o desviaciones tipicas estimados se emplean luego para calcular los UCL y LCL en el gráfico de control de la media. Estimacion de sigma=“Rango medio”/d2 o “S media”/c4.</p>
<div id="libreria-qcc-1" class="section level4">
<h4><span class="header-section-number">3.2.2.1</span> Librería qcc:</h4>
<p>Procedimiento estándar para la construcción de gráficos de control para el rango y la media: etapas I y II</p>
<p>Se estiman los límites naturales del gráfico de control.
Primero se estima la variabilidad del proceso con el gráfico de rangos. Se sigue el siguiente proceso:</p>
<ol style="list-style-type: decimal">
<li>Gráfico con 4 paneles</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb16-2" title="2">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a></code></pre></div>
<p>Se estiman los límites naturales de control del gráfico de rangos mediante las 25 primeras muestras:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,],<span class="dt">type=</span><span class="st">&quot;R&quot;</span>,<span class="dt">nsigmas=</span><span class="dv">3</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)  <span class="co"># type indica gráfico de rangos, R-para variables</span></a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = Dureza[1:25, ], type = &quot;R&quot;, nsigmas = 3, restore.par = FALSE)
##  $ type      : chr &quot;R&quot;
##  $ data.name : chr &quot;Dureza[1:25, ]&quot;
##  $ data      : num [1:25, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:25] 75.4 38.9 34.5 30.4 62.6 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center    : num 49.2
##  $ std.dev   : num 21.1
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 0 104
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Se ha creado un objeto qcc, el primer gráfico de control</p>
<p>Los parámetros de la funcion qcc son los siguientes:</p>
<p>qcc(data, type=“xbar”, sizes, center, std.dev, limits,data.name, labels, newdata, newsizes, newlabels, nsigmas = 3, confidence.level, rules = shewhart.rules, plot = TRUE)</p>
<p>El gráfico proporciona además un resumen incluyendo estadástica descriptiva referida a los grupos,
tamaño de la submuestra, num de grupos, media del estadístico del gráfico de control, desviación típica resultado de dividir el rango medio entre d2 (tabulado)</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">summary</span>(<span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">type=</span><span class="st">&quot;R&quot;</span>,<span class="dt">plot=</span><span class="ot">FALSE</span>))</a></code></pre></div>
<pre><code>## 
## Call:
## qcc(data = Dureza[1:25, ], type = &quot;R&quot;, plot = FALSE)
## 
## R chart for Dureza[1:25, ] 
## 
## Summary of group statistics:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
##   8.82805  32.43291  40.93472  49.17549  60.46494 149.23799 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  49.17549
## Standard deviation:  21.14165 
## 
## Control limits:
##  LCL      UCL
##    0 103.9801</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="co">#Proceso de control continuo: se aumñaden las muestras restantes:</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">qcc</span>(Dureza[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span><span class="op">:</span><span class="dv">25</span>),], <span class="dt">type=</span><span class="st">&quot;R&quot;</span>, <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,],<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = Dureza[c(1:10, 12:25), ], type = &quot;R&quot;, newdata = Dureza[26:50,      ], restore.par = FALSE)
##  $ type        : chr &quot;R&quot;
##  $ data.name   : chr &quot;Dureza[c(1:10, 12:25), ]&quot;
##  $ data        : num [1:24, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:24] 75.4 38.9 34.5 30.4 62.6 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:24] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : Named int [1:24] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:24] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center      : num 45
##  $ std.dev     : num 19.3
##  $ newstats    : Named num [1:25] 45 42.2 45.3 43.8 67.6 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:25, 1:5] 193 182 198 195 231 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;Dureza[26:50, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 0 95.2
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Grafico x barra:</p>
<ol style="list-style-type: decimal">
<li>Con la estimación de la desviación típica obtenida ateriormente con el grumñáfico R, se determinan los lumñáímites de control naturales con las primeras 24 muestras (es recomendable utilizar al menos 20 muestras para ello).</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span><span class="op">:</span><span class="dv">25</span>),], <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>,<span class="dt">nsigmas=</span><span class="dv">3</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = Dureza[c(1:10, 12:25), ], type = &quot;xbar&quot;, nsigmas = 3, restore.par = FALSE)
##  $ type      : chr &quot;xbar&quot;
##  $ data.name : chr &quot;Dureza[c(1:10, 12:25), ]&quot;
##  $ data      : num [1:24, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:24] 184 173 193 183 174 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:24] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : Named int [1:24] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:24] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center    : num 187
##  $ std.dev   : num 19.3
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 161 213
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Seguidamente se incluyen las 25 restantes (sin afectar al cálculo de los límites de control), con el objeto de
monitorizar de forma continua el proceso.</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span><span class="op">:</span><span class="dv">24</span>),], <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>, <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,],<span class="dt">nsigmas=</span><span class="dv">3</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = Dureza[c(1:10, 12:24), ], type = &quot;xbar&quot;, newdata = Dureza[26:50,      ], nsigmas = 3, restore.par = FALSE)
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;Dureza[c(1:10, 12:24), ]&quot;
##  $ data        : num [1:23, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:23] 184 173 193 183 174 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:23] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : Named int [1:23] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:23] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center      : num 187
##  $ std.dev     : num 19.7
##  $ newstats    : Named num [1:25] 188 195 188 193 196 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:25, 1:5] 193 182 198 195 231 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;Dureza[26:50, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 160 213
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">par</span>(op)</a></code></pre></div>
<p>Gráfico S (desviaciones típicas)-para variables.
También podríamos haber calculado el gráfico S en lugar del de rangos. Para muestras pequeñas ses usual usar el R, entre otras cosas por su sencillez. Para submuestras con tamaños muestrales n &gt; 10, debería utilizarse preferiblemente el gráfico S:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">type=</span><span class="st">&quot;S&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = Dureza[1:25, ], type = &quot;S&quot;)
##  $ type      : chr &quot;S&quot;
##  $ data.name : chr &quot;Dureza[1:25, ]&quot;
##  $ data      : num [1:25, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:25] 29.8 13.9 14.3 14.1 24.7 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center    : num 19.7
##  $ std.dev   : num 21
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 0 41.2
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">type=</span><span class="st">&quot;S&quot;</span>, <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,])</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = Dureza[1:25, ], type = &quot;S&quot;, newdata = Dureza[26:50, ])
##  $ type        : chr &quot;S&quot;
##  $ data.name   : chr &quot;Dureza[1:25, ]&quot;
##  $ data        : num [1:25, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:25] 29.8 13.9 14.3 14.1 24.7 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center      : num 19.7
##  $ std.dev     : num 21
##  $ newstats    : Named num [1:25] 17.3 16.6 19 15.9 26.2 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:25, 1:5] 193 182 198 195 231 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;Dureza[26:50, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 0 41.2
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p><strong>Algunas utilidades de la función qcc</strong></p>
<ul>
<li>Diversas maneras de representación de los gráficos de control:</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">q&lt;-<span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,],<span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>,</a>
<a class="sourceLine" id="cb32-2" title="2">       <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,], <span class="dt">plot=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p>Se pueden mostrar sólo aquellas muestras que no han sido utilizadas para obtener los límites naturales de control
fijando el parámetro chart.all=FALSE (sólo muestra de monitorizado).</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">plot</span>(q, <span class="dt">chart.all=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-12-1.png" width="672" />
nsigmas es el número de sigmas que se van a usar para construir los límites # de control, sumando y restando dicha cantidad al valor central.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,],<span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>,<span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,], <span class="dt">nsigmas=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = Dureza[1:25, ], type = &quot;xbar&quot;, newdata = Dureza[26:50,      ], nsigmas = 2)
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;Dureza[1:25, ]&quot;
##  $ data        : num [1:25, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:25] 184 173 193 183 174 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center      : num 185
##  $ std.dev     : num 21.1
##  $ newstats    : Named num [1:25] 188 195 188 193 196 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:25, 1:5] 193 182 198 195 231 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;Dureza[26:50, ]&quot;
##  $ nsigmas     : num 2
##  $ limits      : num [1, 1:2] 166 204
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>confidence.level es el nivel de confianza. El parámetro nsigmas queda anulado cuando se define confidence.level</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">qcc</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,],<span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>,<span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,],<span class="dt">confidence.level=</span><span class="fl">0.99</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call            : language qcc(data = Dureza[1:25, ], type = &quot;xbar&quot;, newdata = Dureza[26:50,      ], confidence.level = 0.99)
##  $ type            : chr &quot;xbar&quot;
##  $ data.name       : chr &quot;Dureza[1:25, ]&quot;
##  $ data            : num [1:25, 1:5] 138 175 178 199 205 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics      : Named num [1:25] 184 173 193 183 174 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes           : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ center          : num 185
##  $ std.dev         : num 21.1
##  $ newstats        : Named num [1:25] 188 195 188 193 196 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata         : num [1:25, 1:5] 193 182 198 195 231 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes        : Named int [1:25] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:25] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name    : chr &quot;Dureza[26:50, ]&quot;
##  $ confidence.level: num 0.99
##  $ limits          : num [1, 1:2] 161 210
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations      :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<ul>
<li>Si los limites de control se calcularan para una distancia de 1.5 * sigma
Datos: “pistonrings”</li>
</ul>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">#otros 4 gráficos</span></a>
<a class="sourceLine" id="cb38-3" title="3">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a></code></pre></div>
<p>Se obtienen los límites naturales de control para el gráfico R</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">q=<span class="kw">qcc</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">type=</span><span class="st">&quot;R&quot;</span>,<span class="dt">nsigmas=</span><span class="fl">1.5</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## qcc(data = diameter[1:25, ], type = &quot;R&quot;, nsigmas = 1.5, restore.par = FALSE)
## 
## R chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## 0.00800 0.01800 0.02100 0.02276 0.02600 0.03900 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  0.02276
## Standard deviation:  0.009785039 
## 
## Control limits:
##         LCL        UCL
##  0.01007733 0.03544267</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># Se elimiminan los puntos fuera de control (1, 3, 11, 14)</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="kw">qcc</span>(diameter[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>),], <span class="dt">type=</span><span class="st">&quot;R&quot;</span>, <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,],<span class="dt">nsigmas=</span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb42-3" title="3">    ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-16-2.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = diameter[c(2, 4:10, 12, 13, 15:25), ], type = &quot;R&quot;, newdata = diameter[26:40,      ], nsigmas = 1.5, re| __truncated__
##  $ type        : chr &quot;R&quot;
##  $ data.name   : chr &quot;diameter[c(2, 4:10, 12, 13, 15:25), ]&quot;
##  $ data        : num [1:21, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:21] 0.019 0.022 0.026 0.024 0.012 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:21] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ sizes       : Named int [1:21] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:21] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ center      : num 0.0213
##  $ std.dev     : num 0.00917
##  $ newstats    : Named num [1:15] 0.044 0.025 0.015 0.019 0.017 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:15, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:15] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;diameter[26:40, ]&quot;
##  $ nsigmas     : num 1.5
##  $ limits      : num [1, 1:2] 0.00945 0.03322
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co"># Todavia queda un punto fuera de control, el 25. Se elimina</span></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="kw">qcc</span>(diameter[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">24</span>),], <span class="dt">type=</span><span class="st">&quot;R&quot;</span>, <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,],<span class="dt">nsigmas=</span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb44-3" title="3">    ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-16-3.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = diameter[c(2, 4:10, 12, 13, 15:24), ], type = &quot;R&quot;, newdata = diameter[26:40,      ], nsigmas = 1.5, re| __truncated__
##  $ type        : chr &quot;R&quot;
##  $ data.name   : chr &quot;diameter[c(2, 4:10, 12, 13, 15:24), ]&quot;
##  $ data        : num [1:20, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:20] 0.019 0.022 0.026 0.024 0.012 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:20] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ sizes       : Named int [1:20] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:20] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ center      : num 0.0206
##  $ std.dev     : num 0.00888
##  $ newstats    : Named num [1:15] 0.044 0.025 0.015 0.019 0.017 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:15, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:15] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;diameter[26:40, ]&quot;
##  $ nsigmas     : num 1.5
##  $ limits      : num [1, 1:2] 0.00914 0.03216
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="co"># Se construye el diagrama para las medias:</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="kw">qcc</span>(diameter[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">24</span>),], <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>, <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,],<span class="dt">nsigmas=</span><span class="fl">1.5</span></a>
<a class="sourceLine" id="cb46-3" title="3">    ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-16-4.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = diameter[c(2, 4:10, 12, 13, 15:24), ], type = &quot;xbar&quot;, newdata = diameter[26:40,      ], nsigmas = 1.5,| __truncated__
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;diameter[c(2, 4:10, 12, 13, 15:24), ]&quot;
##  $ data        : num [1:20, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:20] 74 74 74 74 74 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:20] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ sizes       : Named int [1:20] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:20] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ center      : num 74
##  $ std.dev     : num 0.00888
##  $ newstats    : Named num [1:15] 74 74 74 74 74 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:15, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:15] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;diameter[26:40, ]&quot;
##  $ nsigmas     : num 1.5
##  $ limits      : num [1, 1:2] 74 74
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">par</span>(op)</a></code></pre></div>
<p>Todavía hay dos puntos fuera de control. Los eliminamos:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">a=<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">24</span>)</a>
<a class="sourceLine" id="cb49-2" title="2"><span class="kw">qcc</span>(diameter[a[<span class="op">-</span><span class="kw">c</span>(<span class="dv">14</span>,<span class="dv">16</span>)],], <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>, <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,],<span class="dt">nsigmas=</span><span class="fl">1.5</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = diameter[a[-c(14, 16)], ], type = &quot;xbar&quot;, newdata = diameter[26:40,      ], nsigmas = 1.5)
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;diameter[a[-c(14, 16)], ]&quot;
##  $ data        : num [1:18, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:18] 74 74 74 74 74 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:18] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ sizes       : Named int [1:18] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:18] &quot;2&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; ...
##  $ center      : num 74
##  $ std.dev     : num 0.00896
##  $ newstats    : Named num [1:15] 74 74 74 74 74 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata     : num [1:15, 1:5] 74 74 74 74 74 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : Named int [1:15] 5 5 5 5 5 5 5 5 5 5 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; ...
##  $ newdata.name: chr &quot;diameter[26:40, ]&quot;
##  $ nsigmas     : num 1.5
##  $ limits      : num [1, 1:2] 74 74
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>El proceso está bajo control; por eso se toman los límites naturales obtenidos y se utilizan para controlar el proceso
en continuo.
Al representar las muestras restantes, se observa que varios puntos están fuera de control.
Deberían identificarse las causas que provocaron esos resultados anómalos, con el fin de corregir las anomalías y/o
identificar cualquier cambio en el proceso (si esto último ocurre, habría que recalcular los límites de control).</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">detach</span>(pistonrings)</a></code></pre></div>
<p>Al principio del código se introdujo un attach para poder llamar a las variables que componen pistonrings.
Es conveniente, aplicar un detach para no confundir variables en adelante</p>
</div>
</div>
<div id="renderizado" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Grafico de control para valores individuales de las variables</h3>
<p><strong>Ejemplo: tiempos de renderizado</strong></p>
<p>Se simulan los tiempos de operación que cada operario dedica a cada tarea de renderizado:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">muestra1=<span class="kw">rnorm</span>(<span class="dv">50</span>,<span class="fl">33.52</span>,<span class="fl">0.34</span>) <span class="co"># Operador 1</span></a>
<a class="sourceLine" id="cb52-2" title="2">muestra2=<span class="kw">rnorm</span>(<span class="dv">50</span>,<span class="dv">32</span>,<span class="fl">0.37</span>) <span class="co"># Operador 2</span></a>
<a class="sourceLine" id="cb52-3" title="3">muestra3=<span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dv">40</span>,<span class="fl">0.5</span>) <span class="co"># Operador 3</span></a>
<a class="sourceLine" id="cb52-4" title="4">muestra=<span class="kw">c</span>(muestra1,muestra2,muestra3)</a>
<a class="sourceLine" id="cb52-5" title="5"></a>
<a class="sourceLine" id="cb52-6" title="6">sample &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(muestra)</a>
<a class="sourceLine" id="cb52-7" title="7">datos &lt;-<span class="st"> </span><span class="kw">data.frame</span>(muestra,sample)</a>
<a class="sourceLine" id="cb52-8" title="8"><span class="co"># datos.qcc &lt;- qcd(datos)</span></a>
<a class="sourceLine" id="cb52-9" title="9"></a>
<a class="sourceLine" id="cb52-10" title="10">tiempo &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(muestra, sample)</a></code></pre></div>
<p>La empresa pretende establecer los límites de control naturales para la tarea de renderizado, a partir de los cuales monitorizará el proceso con el fin de detectar posibles futuras anomalías. Para ello, toma 30 muestras de 1 elemento que se corresponden con el trabajo realizado por el operador 1. Para hallar los límites de control ejecutamos la función qcc para las 30 primeras muestras <span class="math inline">\((&gt;20)\)</span> con <code>type="xbar.one"</code> y, como el proceso está bajo control, representamos el resto de las muestras a monitorizar (de los tres operarios).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1"><span class="kw">windows</span>(<span class="dv">12</span>,<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb53-2" title="2"><span class="kw">qcc</span>(tiempo[<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>], <span class="dt">type=</span><span class="st">&quot;xbar.one&quot;</span>, <span class="dt">newdata=</span>tiempo[<span class="dv">31</span><span class="op">:</span><span class="dv">110</span>],<span class="dt">nsigmas=</span><span class="dv">3</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = tiempo[1:30], type = &quot;xbar.one&quot;, newdata = tiempo[31:110],      nsigmas = 3)
##  $ type        : chr &quot;xbar.one&quot;
##  $ data.name   : chr &quot;tiempo[1:30]&quot;
##  $ data        : num [1:30, 1] 33.6 33.4 33.6 33.9 33.8 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:30] 33.6 33.4 33.6 33.9 33.8 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:30] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : int [1:30] 1 1 1 1 1 1 1 1 1 1 ...
##  $ center      : num 33.6
##  $ std.dev     : num 0.249
##  $ newstats    : Named num [1:80] 33 33.3 33.8 33.9 33.4 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:80] &quot;31&quot; &quot;32&quot; &quot;33&quot; &quot;34&quot; ...
##  $ newdata     : num [1:80, 1] 33 33.3 33.8 33.9 33.4 ...
##  $ newsizes    : int [1:80] 1 1 1 1 1 1 1 1 1 1 ...
##  $ newdata.name: chr &quot;tiempo[31:110]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 32.9 34.4
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Lo que sucede es la sucesión de dos cambios bruscos bien delimitados. El primero se corresponde con el cambio del primer operario al segundo. El segundo operario, teniendo más experiencia, realiza la tarea en menos tiempo pero, como realiza su trabajo desde diferentes equipos, sus tiempos tienen más variabilidad. Finalmente, el becario se hace cargo del trabajo y el cambio se ve claramente en el gráfico de control: tarda más en realizar la tarea. El trabajo de los dos operarios aparece como puntos fuera de los límites de control, nos damos cuenta perfectamente de que su trabajo pertenece otras distribuciones diferentes a la que rige los tiempos de trabajo del operador 1. Al detectar el primer cambio deberíamos haber recalculado de nuevo los límites de control, pues se ha producido un cambio en el proceso que afecta a la variable medida</p>
</div>
</div>
<div id="graficos-de-control-por-atributos" class="section level2">
<h2><span class="header-section-number">3.3</span> Gráficos de control por atributos</h2>
<p><strong>Gráficos qcc para atributos</strong>:</p>
<div id="P" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Gráficos p</h3>
<p>Al igual que en el caso anterior, lo mejor para ver cómo trabajar con qcc, es con un ejemplo.</p>
<p>Usaremos los datos de orangejuice, sacados también del MONTGOMERY y que estudian el sellado de las juntas de los botes de zumo de naranja concentrado.</p>
<p>Consta de 54 muestras de tamaño 50 cada una de ellas. D es el número de disconformidades trial es la prueba (V-F).</p>
<p>La forma más simple para trabajar con los datos es:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"> <span class="kw">data</span>(orangejuice)</a>
<a class="sourceLine" id="cb55-2" title="2"> <span class="kw">attach</span>(orangejuice)</a></code></pre></div>
<pre><code>## The following object is masked _by_ .GlobalEnv:
## 
##     sample</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"> orangejuice</a></code></pre></div>
<pre><code>##     D sample size trial
## 1  12      1   50  TRUE
## 2  15      2   50  TRUE
## 3   8      3   50  TRUE
## 4  10      4   50  TRUE
## 5   4      5   50  TRUE
## 6   7      6   50  TRUE
## 7  16      7   50  TRUE
## 8   9      8   50  TRUE
## 9  14      9   50  TRUE
## 10 10     10   50  TRUE
## 11  5     11   50  TRUE
## 12  6     12   50  TRUE
## 13 17     13   50  TRUE
## 14 12     14   50  TRUE
## 15 22     15   50  TRUE
## 16  8     16   50  TRUE
## 17 10     17   50  TRUE
## 18  5     18   50  TRUE
## 19 13     19   50  TRUE
## 20 11     20   50  TRUE
## 21 20     21   50  TRUE
## 22 18     22   50  TRUE
## 23 24     23   50  TRUE
## 24 15     24   50  TRUE
## 25  9     25   50  TRUE
## 26 12     26   50  TRUE
## 27  7     27   50  TRUE
## 28 13     28   50  TRUE
## 29  9     29   50  TRUE
## 30  6     30   50  TRUE
## 31  9     31   50 FALSE
## 32  6     32   50 FALSE
## 33 12     33   50 FALSE
## 34  5     34   50 FALSE
## 35  6     35   50 FALSE
## 36  4     36   50 FALSE
## 37  6     37   50 FALSE
## 38  3     38   50 FALSE
## 39  7     39   50 FALSE
## 40  6     40   50 FALSE
## 41  2     41   50 FALSE
## 42  4     42   50 FALSE
## 43  3     43   50 FALSE
## 44  6     44   50 FALSE
## 45  5     45   50 FALSE
## 46  4     46   50 FALSE
## 47  8     47   50 FALSE
## 48  5     48   50 FALSE
## 49  6     49   50 FALSE
## 50  7     50   50 FALSE
## 51  5     51   50 FALSE
## 52  6     52   50 FALSE
## 53  3     53   50 FALSE
## 54  5     54   50 FALSE</code></pre>
<p>Se emplean las 30 primeras muestras para el calibrado, para la obtención de los límites de los graficos de control.</p>
<p>Hago el diagrama de atributos tipo p (proporción de disconformidades) para Trial ==TRUE</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb59-2" title="2">qcc.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[trial], <span class="dt">sizes=</span>size[trial], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-22-1.png" width="672" />
Se realiza una modificación, ya que encontramos que los puntos 15 y 23 están fuera de los límites de control.</p>
<p>Se pueden eliminar puntos que no me interesan con la función “setdiff”:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">nuevos &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">23</span>))</a>
<a class="sourceLine" id="cb60-2" title="2">nuevos</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 16 17 18 19 20 21 22 24 25
## [24] 26 27 28 29 30</code></pre>
<p>Y ahora realizo el control por atributos pero de mis nuevos datos</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb62-2" title="2">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos], <span class="dt">sizes=</span>size[nuevos],<span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">qcc.nuev.atributos </a></code></pre></div>
<pre><code>## List of 11
##  $ call      : language qcc(data = D[nuevos], type = &quot;p&quot;, sizes = size[nuevos])
##  $ type      : chr &quot;p&quot;
##  $ data.name : chr &quot;D[nuevos]&quot;
##  $ data      : int [1:28, 1] 12 15 8 10 4 7 16 9 14 10 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:28] 0.24 0.3 0.16 0.2 0.08 0.14 0.32 0.18 0.28 0.2 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:28] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:28] 50 50 50 50 50 50 50 50 50 50 ...
##  $ center    : num 0.215
##  $ std.dev   : num 0.411
##  $ nsigmas   : num 3
##  $ limits    : num [1:28, 1:2] 0.0407 0.0407 0.0407 0.0407 0.0407 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Todavía hay una submuestra fuera de control aunque ahora es la 20, antes de la primera tanda de eliminación, en la muestra original, era la 21. Se procede a su eliminación:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">nuevos2 &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">21</span>,<span class="dv">23</span>)) </a>
<a class="sourceLine" id="cb65-2" title="2">nuevos2</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 16 17 18 19 20 22 24 25 26
## [24] 27 28 29 30</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2],<span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-25-1.png" width="672" />
El proceso esta bajo control: ahora incluyo las demás muestras</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">b=<span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>,<span class="dt">newdata=</span>D[<span class="op">!</span>trial], </a>
<a class="sourceLine" id="cb68-2" title="2">      <span class="dt">newsizes=</span>size[<span class="op">!</span>trial])</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">summary</span>(b)</a></code></pre></div>
<pre><code>## 
## Call:
## qcc(data = D[nuevos2], type = &quot;p&quot;, sizes = size[nuevos2], newdata = D[!trial],     newsizes = size[!trial])
## 
## p chart for D[nuevos2] 
## 
## Summary of group statistics:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 0.0800000 0.1500000 0.2000000 0.2081481 0.2600000 0.3600000 
## 
## Group sample size:  50
## Number of groups:  27
## Center of group statistics:  0.2081481
## Standard deviation:  0.4059834 
## 
## Summary of group statistics in D[!trial]:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
## 0.0400000 0.0800000 0.1100000 0.1108333 0.1200000 0.2400000 
## 
## Group sample size:  50
## Number of groups:  24 
## 
## Control limits:
##            LCL       UCL
##     0.03590399 0.3803923
##     0.03590399 0.3803923
## ...                     
##     0.03590399 0.3803923</code></pre>
</div>
<div id="np" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Gráfico tipo np</h3>
<p>número de disconformidades a partir de la aprox. norma a la distribución binomial</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1"><span class="co"># Hago el diagrama de atributos tipo np (num de disconformidades) para Trial ==TRUE</span></a>
<a class="sourceLine" id="cb71-2" title="2"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb71-3" title="3">qcc.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[trial], <span class="dt">sizes=</span>size[trial], <span class="dt">type=</span><span class="st">&quot;np&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-27-1.png" width="672" />
Se realiza una modificación, ya que los puntos que se “salen” son el 15 y el 23
Se pueden quitar puntos que no me interesan con la función “setdiff”:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">nuevos &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">23</span>))</a>
<a class="sourceLine" id="cb72-2" title="2">nuevos</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 16 17 18 19 20 21 22 24 25
## [24] 26 27 28 29 30</code></pre>
<p>y ahora hago el control por atributos pero a partir de mis nuevos datos</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos], <span class="dt">sizes=</span>size[nuevos],<span class="dt">type=</span><span class="st">&quot;np&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1">qcc.nuev.atributos <span class="co"># Todavía hay dos fuera de control</span></a></code></pre></div>
<pre><code>## List of 11
##  $ call      : language qcc(data = D[nuevos], type = &quot;np&quot;, sizes = size[nuevos])
##  $ type      : chr &quot;np&quot;
##  $ data.name : chr &quot;D[nuevos]&quot;
##  $ data      : int [1:28, 1] 12 15 8 10 4 7 16 9 14 10 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named int [1:28] 12 15 8 10 4 7 16 9 14 10 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:28] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:28] 50 50 50 50 50 50 50 50 50 50 ...
##  $ center    : num 10.8
##  $ std.dev   : num 2.9
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 2.04 19.46
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">nuevos2 &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">21</span>,<span class="dv">23</span>)) <span class="co"># Aunque ahora es el 20, antes</span></a>
<a class="sourceLine" id="cb77-2" title="2"><span class="co"># de la primera tanda de eliminación era el 21</span></a>
<a class="sourceLine" id="cb77-3" title="3">nuevos2</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 16 17 18 19 20 22 24 25 26
## [24] 27 28 29 30</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2],<span class="dt">type=</span><span class="st">&quot;np&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-29-2.png" width="672" /></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1"><span class="co"># Ahora incluyo las demás muestras</span></a>
<a class="sourceLine" id="cb80-2" title="2">b=<span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2], <span class="dt">type=</span><span class="st">&quot;np&quot;</span>,<span class="dt">newdata=</span>D[<span class="op">!</span>trial], <span class="dt">newsizes=</span>size[<span class="op">!</span>trial])</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-29-3.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="kw">summary</span>(b)</a></code></pre></div>
<pre><code>## 
## Call:
## qcc(data = D[nuevos2], type = &quot;np&quot;, sizes = size[nuevos2], newdata = D[!trial],     newsizes = size[!trial])
## 
## np chart for D[nuevos2] 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
##  4.00000  7.50000 10.00000 10.40741 13.00000 18.00000 
## 
## Group sample size:  50
## Number of groups:  27
## Center of group statistics:  10.40741
## Standard deviation:  2.870736 
## 
## Summary of group statistics in D[!trial]:
##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
##  2.000000  4.000000  5.500000  5.541667  6.000000 12.000000 
## 
## Group sample size:  50
## Number of groups:  24 
## 
## Control limits:
##     LCL      UCL
##  1.7952 19.01962</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1"><span class="kw">detach</span>(orangejuice)</a></code></pre></div>
</div>
<div id="gc" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Gráficos C</h3>
<p><em>Número de no conformidades</em></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1"><span class="co"># Se cargan los datos:</span></a>
<a class="sourceLine" id="cb84-2" title="2"><span class="kw">data</span>(circuit)</a>
<a class="sourceLine" id="cb84-3" title="3"><span class="kw">attach</span>(circuit)</a></code></pre></div>
<pre><code>## The following object is masked _by_ .GlobalEnv:
## 
##     sample</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1"><span class="co"># Hago el diagrama de atributos tipo c (num de disconformidades) para Trial ==TRUE</span></a>
<a class="sourceLine" id="cb86-2" title="2"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb86-3" title="3">qcc.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(x[trial], <span class="dt">sizes=</span>size[circuit<span class="op">$</span>trial], <span class="dt">type=</span><span class="st">&quot;c&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="co"># Se pueden quitar puntos que no me interesan con la función &quot;setdiff&quot; (el 6 y el 20):</span></a>
<a class="sourceLine" id="cb87-2" title="2"></a>
<a class="sourceLine" id="cb87-3" title="3">nuevos &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">20</span>))</a>
<a class="sourceLine" id="cb87-4" title="4">nuevos</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  7  8  9 10 11 12 13 14 15 16 17 18 19 21 22 23 24 25
## [24] 26</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="co">#y ahora hago el control por atributos pero de mis nuevos datos</span></a>
<a class="sourceLine" id="cb89-2" title="2"></a>
<a class="sourceLine" id="cb89-3" title="3"></a>
<a class="sourceLine" id="cb89-4" title="4">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(x[nuevos], <span class="dt">sizes=</span>size[nuevos],<span class="dt">type=</span><span class="st">&quot;c&quot;</span>,<span class="dt">title=</span><span class="st">&quot;Gráfico c</span></a>
<a class="sourceLine" id="cb89-5" title="5"><span class="st">                          para el nnum de unidades defectuosas por muestra&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;muestra&quot;</span>,</a>
<a class="sourceLine" id="cb89-6" title="6">                          <span class="dt">ylab=</span><span class="st">&quot;No conformidades por muestra inspeccionada&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-30-2.png" width="672" /></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(x[nuevos], <span class="dt">sizes=</span>size[nuevos],<span class="dt">newdata=</span>x[<span class="op">!</span>trial],<span class="dt">type=</span><span class="st">&quot;c&quot;</span>,<span class="dt">title=</span><span class="st">&quot;Gráfico c</span></a>
<a class="sourceLine" id="cb90-2" title="2"><span class="st">                          para el num de unidades defectuosas por muestra&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;muestra&quot;</span>,</a>
<a class="sourceLine" id="cb90-3" title="3">                          <span class="dt">ylab=</span><span class="st">&quot;No conformidades por muestra inspeccionada&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-30-3.png" width="672" /></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">detach</span>(circuit)</a></code></pre></div>
</div>
<div id="gu" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Gráficos U</h3>
<p><em>Número medio de no conformidades por muestra</em></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1"><span class="co"># Se cargan los datos:</span></a>
<a class="sourceLine" id="cb92-2" title="2"><span class="kw">data</span>(pcmanufact)</a>
<a class="sourceLine" id="cb92-3" title="3"><span class="kw">attach</span>(pcmanufact)</a></code></pre></div>
<pre><code>## The following object is masked _by_ .GlobalEnv:
## 
##     sample</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1"><span class="co"># Hago el diagrama de atributos tipo c (num de disconformidades) para Trial ==TRUE</span></a>
<a class="sourceLine" id="cb94-2" title="2"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb94-3" title="3">qcc.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(x, <span class="dt">sizes=</span>size, <span class="dt">type=</span><span class="st">&quot;u&quot;</span>,<span class="dt">title=</span><span class="st">&quot;Gráfico</span></a>
<a class="sourceLine" id="cb94-4" title="4"><span class="st">             u para el num medio de unidades defectuosas por</span></a>
<a class="sourceLine" id="cb94-5" title="5"><span class="st">             muestra&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;muestra&quot;</span>,</a>
<a class="sourceLine" id="cb94-6" title="6">                     <span class="dt">ylab=</span><span class="st">&quot;Num no conformidades medias por muestra&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">detach</span>(pcmanufact)</a></code></pre></div>
</div>
</div>
<div id="otros-graficos-de-control-cusum-y-ewma" class="section level2">
<h2><span class="header-section-number">3.4</span> Otros gráficos de Control: CUSUM y EWMA</h2>
<div id="cusum" class="section level3">
<h3><span class="header-section-number">3.4.1</span> GRÀFICOS CUSUM</h3>
<p>Se cargan los datos y se agrupan para poder realizar el gráfico de control</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" title="1"><span class="co">##revision.archivo pistonrings</span></a>
<a class="sourceLine" id="cb96-2" title="2"><span class="kw">data</span>(pistonrings)</a>
<a class="sourceLine" id="cb96-3" title="3"><span class="kw">attach</span>(pistonrings)</a></code></pre></div>
<pre><code>## The following objects are masked _by_ .GlobalEnv:
## 
##     diameter, sample</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1">diameter &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(pistonrings<span class="op">$</span>diameter,pistonrings<span class="op">$</span>sample)</a>
<a class="sourceLine" id="cb98-2" title="2"></a>
<a class="sourceLine" id="cb98-3" title="3"></a>
<a class="sourceLine" id="cb98-4" title="4"><span class="co"># se.shif: es el valor K que nos da la sensibilidad del gráfico,</span></a>
<a class="sourceLine" id="cb98-5" title="5"><span class="co"># detectará cambios, desplazamientos de la media mayores que k veces</span></a>
<a class="sourceLine" id="cb98-6" title="6"><span class="co"># la desviación típica estimada</span></a>
<a class="sourceLine" id="cb98-7" title="7"><span class="co"># decision.interval: es el parámetro h, a partir de cual se construyen</span></a>
<a class="sourceLine" id="cb98-8" title="8"><span class="co"># los límites de control: H = h_sigma. Suele valer 4 o 5.</span></a>
<a class="sourceLine" id="cb98-9" title="9"></a>
<a class="sourceLine" id="cb98-10" title="10"></a>
<a class="sourceLine" id="cb98-11" title="11"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb98-12" title="12"><span class="co"># 4 paneles en un gráfico:</span></a>
<a class="sourceLine" id="cb98-13" title="13">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-14" title="14">q &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">decision.interval =</span> <span class="dv">4</span>, <span class="dt">se.shift =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb98-15" title="15">           ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb98-16" title="16"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = diameter[1:25, ], decision.interval = 4, se.shift = 1,     restore.par = FALSE)
## 
## cusum chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   73.99   74.00   74.00   74.00   74.00   74.01 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  74.00118
## Standard deviation:  0.009785039 
## 
## Decision interval (std.err.): 4 
## Shift detection  (std. err.): 1</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1">q1 &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,], <span class="dt">decision.interval =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb100-2" title="2">            <span class="dt">se.shift =</span> <span class="dv">1</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb100-3" title="3">q2 &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,], <span class="dt">decision.interval =</span> <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb100-4" title="4">            <span class="dt">se.shift =</span> <span class="dv">1</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb100-5" title="5"><span class="kw">summary</span>(q2)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = diameter[1:25, ], decision.interval = 5, se.shift = 1,     newdata = diameter[26:40, ], restore.par = FALSE)
## 
## cusum chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   73.99   74.00   74.00   74.00   74.00   74.01 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  74.00118
## Standard deviation:  0.009785039 
## 
## Summary of group statistics in diameter[26:40, ]:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 73.99220 74.00290 74.00720 74.00765 74.01270 74.02340 
## 
## Group sample size:  5
## Number of groups:  15 
## 
## Decision interval (std.err.): 5 
## Shift detection  (std. err.): 1</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="kw">plot</span>(q2, <span class="dt">chart.all=</span><span class="ot">FALSE</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">par</span>(op)</a></code></pre></div>
<p>Con una mayor sensibilidad, detectando cambios de magnitud 0.6 sigma:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb104-2" title="2"><span class="co"># 4 paneles en un gráfico:</span></a>
<a class="sourceLine" id="cb104-3" title="3">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb104-4" title="4">q &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">decision.interval =</span> <span class="dv">4</span>, <span class="dt">se.shift =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb104-5" title="5">           ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb104-6" title="6"></a>
<a class="sourceLine" id="cb104-7" title="7"><span class="co"># Elimino un punto, el 14</span></a>
<a class="sourceLine" id="cb104-8" title="8">q1 &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>),], <span class="dt">decision.interval =</span> <span class="dv">4</span>, <span class="dt">se.shift =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb104-9" title="9">            ,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb104-10" title="10"><span class="kw">summary</span>(q1)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = diameter[c(1:13, 15:25), ], decision.interval = 4,     se.shift = 0.6, restore.par = FALSE)
## 
## cusum chart for diameter[c(1:13, 15:25), ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   73.99   74.00   74.00   74.00   74.00   74.01 
## 
## Group sample size:  5
## Number of groups:  24
## Center of group statistics:  74.00163
## Standard deviation:  0.009494124 
## 
## Decision interval (std.err.): 4 
## Shift detection  (std. err.): 0.6</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1">q2 &lt;-<span class="st"> </span><span class="kw">cusum</span>(diameter[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">13</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>),], <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,], <span class="dt">se.shift =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb106-2" title="2">           , <span class="dt">decision.interval =</span> <span class="dv">4</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb106-3" title="3"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = diameter[1:25, ], decision.interval = 4, se.shift = 0.6,     restore.par = FALSE)
## 
## cusum chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   73.99   74.00   74.00   74.00   74.00   74.01 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  74.00118
## Standard deviation:  0.009785039 
## 
## Decision interval (std.err.): 4 
## Shift detection  (std. err.): 0.6</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1"><span class="kw">plot</span>(q2, <span class="dt">chart.all=</span><span class="ot">FALSE</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1"><span class="kw">par</span>(op)</a>
<a class="sourceLine" id="cb109-2" title="2"></a>
<a class="sourceLine" id="cb109-3" title="3"><span class="co">#revision pistonrings </span></a>
<a class="sourceLine" id="cb109-4" title="4"><span class="kw">detach</span>(pistonrings)</a></code></pre></div>
<p><strong>Aplicación del gráfico de control CUSUM a los datos “Dureza” o “plates”:</strong></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="kw">windows</span>(<span class="dv">10</span>,<span class="dv">15</span>)</a>
<a class="sourceLine" id="cb110-2" title="2"></a>
<a class="sourceLine" id="cb110-3" title="3">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb110-4" title="4"><span class="co"># Se suele tomar como buena práctica el asignar el valor de h = 5 cuando se pretende</span></a>
<a class="sourceLine" id="cb110-5" title="5"><span class="co"># identificar un cambio en la media de una desviación típica:</span></a>
<a class="sourceLine" id="cb110-6" title="6">q &lt;-<span class="st"> </span><span class="kw">cusum</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">decision.interval =</span> <span class="dv">5</span>, <span class="dt">se.shift =</span> <span class="dv">1</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb110-7" title="7"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = Dureza[1:25, ], decision.interval = 5, se.shift = 1,     restore.par = FALSE)
## 
## cusum chart for Dureza[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   148.0   180.8   187.0   185.2   190.8   201.9 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  185.1899
## Standard deviation:  21.14165 
## 
## Decision interval (std.err.): 5 
## Shift detection  (std. err.): 1</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="kw">names</span>(q); q<span class="op">$</span>limits</a></code></pre></div>
<pre><code>##  [1] &quot;call&quot;              &quot;type&quot;              &quot;data.name&quot;        
##  [4] &quot;data&quot;              &quot;statistics&quot;        &quot;sizes&quot;            
##  [7] &quot;center&quot;            &quot;std.dev&quot;           &quot;pos&quot;              
## [10] &quot;neg&quot;               &quot;head.start&quot;        &quot;decision.interval&quot;
## [13] &quot;se.shift&quot;          &quot;violations&quot;</code></pre>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1"><span class="co"># Para la muestra a monitoriza:</span></a>
<a class="sourceLine" id="cb115-2" title="2">q2 &lt;-<span class="st">  </span><span class="kw">cusum</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">decision.interval =</span> <span class="dv">5</span>, <span class="dt">se.shift =</span> <span class="dv">1</span>, <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,],</a>
<a class="sourceLine" id="cb115-3" title="3">            <span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="kw">summary</span>(q2)</a></code></pre></div>
<pre><code>## 
## Call:
## cusum(data = Dureza[1:25, ], decision.interval = 5, se.shift = 1,     newdata = Dureza[26:50, ], restore.par = FALSE)
## 
## cusum chart for Dureza[1:25, ] 
## 
## Summary of group statistics:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   148.0   180.8   187.0   185.2   190.8   201.9 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  185.1899
## Standard deviation:  21.14165 
## 
## Summary of group statistics in Dureza[26:50, ]:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 187.9595 194.8110 201.1229 198.9129 202.5958 205.1781 
## 
## Group sample size:  5
## Number of groups:  25 
## 
## Decision interval (std.err.): 5 
## Shift detection  (std. err.): 1</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1"><span class="kw">par</span>(op)</a></code></pre></div>
<p>En este caso, el gráfico de control de la media detecta antes el cambio del proceso.
Es un cambio grande. El gráfico CUSUM detecta mejor los cambios pequeños. Cambios inferiores 2<em>sigma: los detectan mejor los gráficos CUSUM y EWMA Cambios superiores a 2</em>sigma: los detectan mejor los gráficos de la media y rango.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="co"># Alternativamente se podría haber utilizado la librería qcr:</span></a>
<a class="sourceLine" id="cb119-2" title="2"><span class="kw">library</span>(qcr)</a>
<a class="sourceLine" id="cb119-3" title="3"></a>
<a class="sourceLine" id="cb119-4" title="4">res.qcd &lt;-<span class="st"> </span><span class="kw">qcd</span>(plates, <span class="dt">type.data =</span> <span class="st">&quot;dependence&quot;</span>)</a>
<a class="sourceLine" id="cb119-5" title="5">res.qcs &lt;-<span class="st"> </span><span class="kw">qcs.cusum</span>(res.qcd, <span class="dt">type =</span> <span class="st">&quot;cusum&quot;</span>)</a>
<a class="sourceLine" id="cb119-6" title="6"><span class="kw">plot</span>(res.qcs)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
<div id="ewma" class="section level3">
<h3><span class="header-section-number">3.4.2</span> GRÁFICOS EWMA</h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="co"># revision</span></a>
<a class="sourceLine" id="cb120-2" title="2"><span class="kw">data</span>(pistonrings)</a>
<a class="sourceLine" id="cb120-3" title="3"><span class="kw">attach</span>(pistonrings)</a></code></pre></div>
<pre><code>## The following objects are masked _by_ .GlobalEnv:
## 
##     diameter, sample</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1">diameter &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(pistonrings<span class="op">$</span>diameter, pistonrings<span class="op">$</span>sample)</a>
<a class="sourceLine" id="cb122-2" title="2"></a>
<a class="sourceLine" id="cb122-3" title="3"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb122-4" title="4"><span class="co"># 4 paneles en un gráfico:</span></a>
<a class="sourceLine" id="cb122-5" title="5">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb122-6" title="6"><span class="co"># Se suele tomar como buena práctica el asignar el valor de 0.2 al parametro lambda</span></a>
<a class="sourceLine" id="cb122-7" title="7">q &lt;-<span class="st"> </span><span class="kw">ewma</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">lambda=</span><span class="fl">0.2</span>, <span class="dt">nsigmas=</span><span class="dv">3</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb122-8" title="8"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## ewma(data = diameter[1:25, ], lambda = 0.2, nsigmas = 3, restore.par = FALSE)
## 
## ewma chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 73.99020 73.99820 74.00080 74.00118 74.00420 74.01020 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  74.00118
## Standard deviation:  0.009785039 
## 
## Smoothing parameter: 0.2 
## Control limits:
##          LCL      UCL
## 1   73.99855 74.00380
## 2   73.99781 74.00454
## ...                  
## 25  73.99680 74.00555</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1"><span class="kw">names</span>(q); q<span class="op">$</span>limits</a></code></pre></div>
<pre><code>##  [1] &quot;call&quot;       &quot;type&quot;       &quot;data.name&quot;  &quot;data&quot;       &quot;statistics&quot;
##  [6] &quot;sizes&quot;      &quot;center&quot;     &quot;std.dev&quot;    &quot;x&quot;          &quot;y&quot;         
## [11] &quot;sigma&quot;      &quot;lambda&quot;     &quot;nsigmas&quot;    &quot;limits&quot;     &quot;violations&quot;</code></pre>
<pre><code>##         LCL      UCL
## 1  73.99855 74.00380
## 2  73.99781 74.00454
## 3  73.99742 74.00493
## 4  73.99718 74.00517
## 5  73.99704 74.00531
## 6  73.99695 74.00540
## 7  73.99690 74.00545
## 8  73.99686 74.00549
## 9  73.99684 74.00551
## 10 73.99683 74.00553
## 11 73.99682 74.00554
## 12 73.99681 74.00554
## 13 73.99681 74.00555
## 14 73.99680 74.00555
## 15 73.99680 74.00555
## 16 73.99680 74.00555
## 17 73.99680 74.00555
## 18 73.99680 74.00555
## 19 73.99680 74.00555
## 20 73.99680 74.00555
## 21 73.99680 74.00555
## 22 73.99680 74.00555
## 23 73.99680 74.00555
## 24 73.99680 74.00555
## 25 73.99680 74.00555</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1"><span class="co"># Para la muestra a monitorizar se emplean unos límites ligeramente más exigentes</span></a>
<a class="sourceLine" id="cb127-2" title="2">q2 &lt;-<span class="st">  </span><span class="kw">ewma</span>(diameter[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">lambda=</span><span class="fl">0.2</span>, <span class="dt">nsigmas=</span><span class="dv">3</span>, <span class="dt">newdata=</span>diameter[<span class="dv">26</span><span class="op">:</span><span class="dv">40</span>,],</a>
<a class="sourceLine" id="cb127-3" title="3">            <span class="dt">plot =</span> <span class="ot">FALSE</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb127-4" title="4"><span class="kw">summary</span>(q2)</a></code></pre></div>
<pre><code>## 
## Call:
## ewma(data = diameter[1:25, ], lambda = 0.2, nsigmas = 3, newdata = diameter[26:40,     ], plot = FALSE, restore.par = FALSE)
## 
## ewma chart for diameter[1:25, ] 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 73.99020 73.99820 74.00080 74.00118 74.00420 74.01020 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  74.00118
## Standard deviation:  0.009785039 
## 
## Summary of group statistics in diameter[26:40, ]:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 73.99220 74.00290 74.00720 74.00765 74.01270 74.02340 
## 
## Group sample size:  5
## Number of groups:  15 
## 
## Smoothing parameter: 0.2 
## Control limits:
##          LCL      UCL
## 1   73.99855 74.00380
## 2   73.99781 74.00454
## ...                  
## 40  73.99680 74.00555</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1"><span class="kw">plot</span>(q2)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">par</span>(op)</a>
<a class="sourceLine" id="cb130-2" title="2"></a>
<a class="sourceLine" id="cb130-3" title="3"><span class="co">#detach(pistonrings)</span></a>
<a class="sourceLine" id="cb130-4" title="4"></a>
<a class="sourceLine" id="cb130-5" title="5"><span class="kw">names</span>(q2)</a></code></pre></div>
<pre><code>##  [1] &quot;call&quot;         &quot;type&quot;         &quot;data.name&quot;    &quot;data&quot;        
##  [5] &quot;statistics&quot;   &quot;sizes&quot;        &quot;center&quot;       &quot;std.dev&quot;     
##  [9] &quot;newstats&quot;     &quot;newdata&quot;      &quot;newsizes&quot;     &quot;newdata.name&quot;
## [13] &quot;x&quot;            &quot;y&quot;            &quot;sigma&quot;        &quot;lambda&quot;      
## [17] &quot;nsigmas&quot;      &quot;limits&quot;       &quot;violations&quot;</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1">q2<span class="op">$</span>limits</a></code></pre></div>
<pre><code>##         LCL      UCL
## 1  73.99855 74.00380
## 2  73.99781 74.00454
## 3  73.99742 74.00493
## 4  73.99718 74.00517
## 5  73.99704 74.00531
## 6  73.99695 74.00540
## 7  73.99690 74.00545
## 8  73.99686 74.00549
## 9  73.99684 74.00551
## 10 73.99683 74.00553
## 11 73.99682 74.00554
## 12 73.99681 74.00554
## 13 73.99681 74.00555
## 14 73.99680 74.00555
## 15 73.99680 74.00555
## 16 73.99680 74.00555
## 17 73.99680 74.00555
## 18 73.99680 74.00555
## 19 73.99680 74.00555
## 20 73.99680 74.00555
## 21 73.99680 74.00555
## 22 73.99680 74.00555
## 23 73.99680 74.00555
## 24 73.99680 74.00555
## 25 73.99680 74.00555
## 26 73.99680 74.00555
## 27 73.99680 74.00555
## 28 73.99680 74.00555
## 29 73.99680 74.00555
## 30 73.99680 74.00555
## 31 73.99680 74.00555
## 32 73.99680 74.00555
## 33 73.99680 74.00555
## 34 73.99680 74.00555
## 35 73.99680 74.00555
## 36 73.99680 74.00555
## 37 73.99680 74.00555
## 38 73.99680 74.00555
## 39 73.99680 74.00555
## 40 73.99680 74.00555</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="co">##</span></a>
<a class="sourceLine" id="cb134-2" title="2"><span class="co">## En el caso de observaciones individuales:</span></a>
<a class="sourceLine" id="cb134-3" title="3"><span class="co">##</span></a>
<a class="sourceLine" id="cb134-4" title="4">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">33.75</span>, <span class="fl">33.05</span>, <span class="dv">34</span>, <span class="fl">33.81</span>, <span class="fl">33.46</span>, <span class="fl">34.02</span>, <span class="fl">33.68</span>, <span class="fl">33.27</span>, <span class="fl">33.49</span>, <span class="fl">33.20</span>,</a>
<a class="sourceLine" id="cb134-5" title="5">       <span class="fl">33.62</span>, <span class="fl">33.00</span>, <span class="fl">33.54</span>, <span class="fl">33.12</span>, <span class="fl">33.84</span>) <span class="co"># viscosity data (Montgomery, pag. 242)</span></a>
<a class="sourceLine" id="cb134-6" title="6">q &lt;-<span class="st">  </span><span class="kw">ewma</span>(x, <span class="dt">lambda=</span><span class="fl">0.2</span>, <span class="dt">nsigmas=</span><span class="fl">2.7</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-36-2.png" width="672" /></p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## ewma(data = x, lambda = 0.2, nsigmas = 2.7)
## 
## ewma chart for x 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 33.00000 33.23500 33.54000 33.52333 33.78000 34.02000 
## 
## Group sample size:  1
## Number of groups:  15
## Center of group statistics:  33.52333
## Standard deviation:  0.4261651 
## 
## Smoothing parameter: 0.2 
## Control limits:
##            LCL      UCL
## [1,]  33.29320 33.75346
## [2,]  33.22862 33.81804
## ...                    
## [15,] 33.14002 33.90664</code></pre>
<p><strong>Aplicación del gráfico de control EWMA a los datos “Dureza” o “plates”:</strong></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="kw">windows</span>(<span class="dv">10</span>,<span class="dv">15</span>)</a>
<a class="sourceLine" id="cb137-2" title="2"><span class="co"># 4 paneles en un gráfico:</span></a>
<a class="sourceLine" id="cb137-3" title="3">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb137-4" title="4"><span class="co"># Se suele tomar como buena práctica el asignar el valor de 0.2 al parametro lambda</span></a>
<a class="sourceLine" id="cb137-5" title="5">q &lt;-<span class="st"> </span><span class="kw">ewma</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">lambda=</span><span class="fl">0.2</span>, <span class="dt">nsigmas=</span><span class="dv">3</span>,<span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb137-6" title="6"><span class="kw">summary</span>(q)</a></code></pre></div>
<pre><code>## 
## Call:
## ewma(data = Dureza[1:25, ], lambda = 0.2, nsigmas = 3, restore.par = FALSE)
## 
## ewma chart for Dureza[1:25, ] 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 147.9709 180.7828 187.0367 185.1899 190.7910 201.8938 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  185.1899
## Standard deviation:  21.14165 
## 
## Smoothing parameter: 0.2 
## Control limits:
##          LCL      UCL
## 1   179.5170 190.8628
## 2   177.9250 192.4547
## ...                  
## 25  175.7351 194.6446</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1"><span class="kw">names</span>(q); q<span class="op">$</span>limits</a></code></pre></div>
<pre><code>##  [1] &quot;call&quot;       &quot;type&quot;       &quot;data.name&quot;  &quot;data&quot;       &quot;statistics&quot;
##  [6] &quot;sizes&quot;      &quot;center&quot;     &quot;std.dev&quot;    &quot;x&quot;          &quot;y&quot;         
## [11] &quot;sigma&quot;      &quot;lambda&quot;     &quot;nsigmas&quot;    &quot;limits&quot;     &quot;violations&quot;</code></pre>
<pre><code>##         LCL      UCL
## 1  179.5170 190.8628
## 2  177.9250 192.4547
## 3  177.0683 193.3114
## 4  176.5645 193.8152
## 5  176.2570 194.1227
## 6  176.0657 194.3141
## 7  175.9453 194.4344
## 8  175.8690 194.5107
## 9  175.8206 194.5592
## 10 175.7897 194.5900
## 11 175.7700 194.6098
## 12 175.7574 194.6224
## 13 175.7493 194.6304
## 14 175.7442 194.6356
## 15 175.7409 194.6388
## 16 175.7388 194.6410
## 17 175.7374 194.6423
## 18 175.7366 194.6432
## 19 175.7360 194.6437
## 20 175.7357 194.6441
## 21 175.7354 194.6443
## 22 175.7353 194.6444
## 23 175.7352 194.6445
## 24 175.7351 194.6446
## 25 175.7351 194.6446</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="co"># Para la muestra a monitorizar se emplean unos límites ligeramente más exigentes</span></a>
<a class="sourceLine" id="cb142-2" title="2">q2 &lt;-<span class="st">  </span><span class="kw">ewma</span>(Dureza[<span class="dv">1</span><span class="op">:</span><span class="dv">25</span>,], <span class="dt">lambda=</span><span class="fl">0.25</span>, <span class="dt">nsigmas=</span><span class="dv">3</span>, <span class="dt">newdata=</span>Dureza[<span class="dv">26</span><span class="op">:</span><span class="dv">50</span>,],</a>
<a class="sourceLine" id="cb142-3" title="3">            <span class="dt">restore.par=</span><span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1"><span class="kw">summary</span>(q2)</a></code></pre></div>
<pre><code>## 
## Call:
## ewma(data = Dureza[1:25, ], lambda = 0.25, nsigmas = 3, newdata = Dureza[26:50,     ], restore.par = FALSE)
## 
## ewma chart for Dureza[1:25, ] 
## 
## Summary of group statistics:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 147.9709 180.7828 187.0367 185.1899 190.7910 201.8938 
## 
## Group sample size:  5
## Number of groups:  25
## Center of group statistics:  185.1899
## Standard deviation:  21.14165 
## 
## Summary of group statistics in Dureza[26:50, ]:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## 187.9595 194.8110 201.1229 198.9129 202.5958 205.1781 
## 
## Group sample size:  5
## Number of groups:  25 
## 
## Smoothing parameter: 0.25 
## Control limits:
##          LCL      UCL
## 1   178.0987 192.2810
## 2   176.3260 194.0538
## ...                  
## 50  174.4691 195.9106</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1"><span class="kw">par</span>(op)</a></code></pre></div>
<p>En este caso, el gráfico de control de la media detecta antes el cambio del proceso.
Es un cambio grande. El gráfico EWMA detecta mejor los cambios pequeños.
Cambios inferiores 2<em>sigma: los detectan mejor los gráficos CUSUM y EWMA
Cambios superiores a 2</em>sigma: los detectan mejor los gráficos de la media y rango.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" title="1"><span class="co"># Alternativamente se podría haber utilizado la librería qcr:</span></a>
<a class="sourceLine" id="cb146-2" title="2"></a>
<a class="sourceLine" id="cb146-3" title="3"><span class="kw">library</span>(qcr)</a>
<a class="sourceLine" id="cb146-4" title="4"></a>
<a class="sourceLine" id="cb146-5" title="5">res.qcd &lt;-<span class="st"> </span><span class="kw">qcd</span>(plates, <span class="dt">type.data =</span> <span class="st">&quot;dependence&quot;</span>)</a>
<a class="sourceLine" id="cb146-6" title="6"><span class="co"># res.qcs &lt;- qcs.ewma(res.qcd, type = &quot;ewma&quot;) #REVISION</span></a>
<a class="sourceLine" id="cb146-7" title="7"><span class="kw">plot</span>(res.qcs)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
</div>
</div>
<div id="oc" class="section level2">
<h2><span class="header-section-number">3.5</span> CURVAS OC</h2>
<p>Tenemos dos opciones:</p>
<ol style="list-style-type: decimal">
<li><p>La más sencilla es crear un objeto qcc (por variables</p></li>
<li><p>por atributos) y después ejecutar.</p></li>
</ol>
<div id="curvas-oc-para-grafica-de-variables" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Curvas OC para gráfica de variables</h3>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="kw">library</span>(qcc)</a>
<a class="sourceLine" id="cb147-2" title="2"></a>
<a class="sourceLine" id="cb147-3" title="3"><span class="co">### Curvas OC para el gráfico de la media #################################</span></a>
<a class="sourceLine" id="cb147-4" title="4">  </a>
<a class="sourceLine" id="cb147-5" title="5"><span class="kw">data</span>(pistonrings)</a>
<a class="sourceLine" id="cb147-6" title="6">pistonrings</a></code></pre></div>
<pre><code>##     diameter sample trial
## 1     74.030      1  TRUE
## 2     74.002      1  TRUE
## 3     74.019      1  TRUE
## 4     73.992      1  TRUE
## 5     74.008      1  TRUE
## 6     73.995      2  TRUE
## 7     73.992      2  TRUE
## 8     74.001      2  TRUE
## 9     74.011      2  TRUE
## 10    74.004      2  TRUE
## 11    73.988      3  TRUE
## 12    74.024      3  TRUE
## 13    74.021      3  TRUE
## 14    74.005      3  TRUE
## 15    74.002      3  TRUE
## 16    74.002      4  TRUE
## 17    73.996      4  TRUE
## 18    73.993      4  TRUE
## 19    74.015      4  TRUE
## 20    74.009      4  TRUE
## 21    73.992      5  TRUE
## 22    74.007      5  TRUE
## 23    74.015      5  TRUE
## 24    73.989      5  TRUE
## 25    74.014      5  TRUE
## 26    74.009      6  TRUE
## 27    73.994      6  TRUE
## 28    73.997      6  TRUE
## 29    73.985      6  TRUE
## 30    73.993      6  TRUE
## 31    73.995      7  TRUE
## 32    74.006      7  TRUE
## 33    73.994      7  TRUE
## 34    74.000      7  TRUE
## 35    74.005      7  TRUE
## 36    73.985      8  TRUE
## 37    74.003      8  TRUE
## 38    73.993      8  TRUE
## 39    74.015      8  TRUE
## 40    73.988      8  TRUE
## 41    74.008      9  TRUE
## 42    73.995      9  TRUE
## 43    74.009      9  TRUE
## 44    74.005      9  TRUE
## 45    74.004      9  TRUE
## 46    73.998     10  TRUE
## 47    74.000     10  TRUE
## 48    73.990     10  TRUE
## 49    74.007     10  TRUE
## 50    73.995     10  TRUE
## 51    73.994     11  TRUE
## 52    73.998     11  TRUE
## 53    73.994     11  TRUE
## 54    73.995     11  TRUE
## 55    73.990     11  TRUE
## 56    74.004     12  TRUE
## 57    74.000     12  TRUE
## 58    74.007     12  TRUE
## 59    74.000     12  TRUE
## 60    73.996     12  TRUE
## 61    73.983     13  TRUE
## 62    74.002     13  TRUE
## 63    73.998     13  TRUE
## 64    73.997     13  TRUE
## 65    74.012     13  TRUE
## 66    74.006     14  TRUE
## 67    73.967     14  TRUE
## 68    73.994     14  TRUE
## 69    74.000     14  TRUE
## 70    73.984     14  TRUE
## 71    74.012     15  TRUE
## 72    74.014     15  TRUE
## 73    73.998     15  TRUE
## 74    73.999     15  TRUE
## 75    74.007     15  TRUE
## 76    74.000     16  TRUE
## 77    73.984     16  TRUE
## 78    74.005     16  TRUE
## 79    73.998     16  TRUE
## 80    73.996     16  TRUE
## 81    73.994     17  TRUE
## 82    74.012     17  TRUE
## 83    73.986     17  TRUE
## 84    74.005     17  TRUE
## 85    74.007     17  TRUE
## 86    74.006     18  TRUE
## 87    74.010     18  TRUE
## 88    74.018     18  TRUE
## 89    74.003     18  TRUE
## 90    74.000     18  TRUE
## 91    73.984     19  TRUE
## 92    74.002     19  TRUE
## 93    74.003     19  TRUE
## 94    74.005     19  TRUE
## 95    73.997     19  TRUE
## 96    74.000     20  TRUE
## 97    74.010     20  TRUE
## 98    74.013     20  TRUE
## 99    74.020     20  TRUE
## 100   74.003     20  TRUE
## 101   73.988     21  TRUE
## 102   74.001     21  TRUE
## 103   74.009     21  TRUE
## 104   74.005     21  TRUE
## 105   73.996     21  TRUE
## 106   74.004     22  TRUE
## 107   73.999     22  TRUE
## 108   73.990     22  TRUE
## 109   74.006     22  TRUE
## 110   74.009     22  TRUE
## 111   74.010     23  TRUE
## 112   73.989     23  TRUE
## 113   73.990     23  TRUE
## 114   74.009     23  TRUE
## 115   74.014     23  TRUE
## 116   74.015     24  TRUE
## 117   74.008     24  TRUE
## 118   73.993     24  TRUE
## 119   74.000     24  TRUE
## 120   74.010     24  TRUE
## 121   73.982     25  TRUE
## 122   73.984     25  TRUE
## 123   73.995     25  TRUE
## 124   74.017     25  TRUE
## 125   74.013     25  TRUE
## 126   74.012     26 FALSE
## 127   74.015     26 FALSE
## 128   74.030     26 FALSE
## 129   73.986     26 FALSE
## 130   74.000     26 FALSE
## 131   73.995     27 FALSE
## 132   74.010     27 FALSE
## 133   73.990     27 FALSE
## 134   74.015     27 FALSE
## 135   74.001     27 FALSE
## 136   73.987     28 FALSE
## 137   73.999     28 FALSE
## 138   73.985     28 FALSE
## 139   74.000     28 FALSE
## 140   73.990     28 FALSE
## 141   74.008     29 FALSE
## 142   74.010     29 FALSE
## 143   74.003     29 FALSE
## 144   73.991     29 FALSE
## 145   74.006     29 FALSE
## 146   74.003     30 FALSE
## 147   74.000     30 FALSE
## 148   74.001     30 FALSE
## 149   73.986     30 FALSE
## 150   73.997     30 FALSE
## 151   73.994     31 FALSE
## 152   74.003     31 FALSE
## 153   74.015     31 FALSE
## 154   74.020     31 FALSE
## 155   74.004     31 FALSE
## 156   74.008     32 FALSE
## 157   74.002     32 FALSE
## 158   74.018     32 FALSE
## 159   73.995     32 FALSE
## 160   74.005     32 FALSE
## 161   74.001     33 FALSE
## 162   74.004     33 FALSE
## 163   73.990     33 FALSE
## 164   73.996     33 FALSE
## 165   73.998     33 FALSE
## 166   74.015     34 FALSE
## 167   74.000     34 FALSE
## 168   74.016     34 FALSE
## 169   74.025     34 FALSE
## 170   74.000     34 FALSE
## 171   74.030     35 FALSE
## 172   74.005     35 FALSE
## 173   74.000     35 FALSE
## 174   74.016     35 FALSE
## 175   74.012     35 FALSE
## 176   74.001     36 FALSE
## 177   73.990     36 FALSE
## 178   73.995     36 FALSE
## 179   74.010     36 FALSE
## 180   74.024     36 FALSE
## 181   74.015     37 FALSE
## 182   74.020     37 FALSE
## 183   74.024     37 FALSE
## 184   74.005     37 FALSE
## 185   74.019     37 FALSE
## 186   74.035     38 FALSE
## 187   74.010     38 FALSE
## 188   74.012     38 FALSE
## 189   74.015     38 FALSE
## 190   74.026     38 FALSE
## 191   74.017     39 FALSE
## 192   74.013     39 FALSE
## 193   74.036     39 FALSE
## 194   74.025     39 FALSE
## 195   74.026     39 FALSE
## 196   74.010     40 FALSE
## 197   74.005     40 FALSE
## 198   74.029     40 FALSE
## 199   74.000     40 FALSE
## 200   74.020     40 FALSE</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="kw">attach</span>(pistonrings)</a></code></pre></div>
<pre><code>## The following objects are masked _by_ .GlobalEnv:
## 
##     diameter, sample</code></pre>
<pre><code>## The following objects are masked from pistonrings (pos = 3):
## 
##     diameter, sample, trial</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" title="1"><span class="kw">dim</span>(pistonrings)</a></code></pre></div>
<pre><code>## [1] 200   3</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" title="1"><span class="co">#200 datos 3 variables</span></a>
<a class="sourceLine" id="cb154-2" title="2"></a>
<a class="sourceLine" id="cb154-3" title="3"><span class="co">#creacion de los grupos qcc</span></a>
<a class="sourceLine" id="cb154-4" title="4">diameter &lt;-<span class="st"> </span><span class="kw">qcc.groups</span>(pistonrings<span class="op">$</span>diameter, pistonrings<span class="op">$</span>sample)</a>
<a class="sourceLine" id="cb154-5" title="5"></a>
<a class="sourceLine" id="cb154-6" title="6"><span class="co">#hace grupos por diametro y muestra; lo que me da una matriz 40x5</span></a>
<a class="sourceLine" id="cb154-7" title="7"><span class="co">#Como hay 5 observaciones por submuestra, hay 200/5=40 submuestras</span></a>
<a class="sourceLine" id="cb154-8" title="8">diameter</a></code></pre></div>
<pre><code>##      [,1]   [,2]   [,3]   [,4]   [,5]
## 1  74.030 74.002 74.019 73.992 74.008
## 2  73.995 73.992 74.001 74.011 74.004
## 3  73.988 74.024 74.021 74.005 74.002
## 4  74.002 73.996 73.993 74.015 74.009
## 5  73.992 74.007 74.015 73.989 74.014
## 6  74.009 73.994 73.997 73.985 73.993
## 7  73.995 74.006 73.994 74.000 74.005
## 8  73.985 74.003 73.993 74.015 73.988
## 9  74.008 73.995 74.009 74.005 74.004
## 10 73.998 74.000 73.990 74.007 73.995
## 11 73.994 73.998 73.994 73.995 73.990
## 12 74.004 74.000 74.007 74.000 73.996
## 13 73.983 74.002 73.998 73.997 74.012
## 14 74.006 73.967 73.994 74.000 73.984
## 15 74.012 74.014 73.998 73.999 74.007
## 16 74.000 73.984 74.005 73.998 73.996
## 17 73.994 74.012 73.986 74.005 74.007
## 18 74.006 74.010 74.018 74.003 74.000
## 19 73.984 74.002 74.003 74.005 73.997
## 20 74.000 74.010 74.013 74.020 74.003
## 21 73.988 74.001 74.009 74.005 73.996
## 22 74.004 73.999 73.990 74.006 74.009
## 23 74.010 73.989 73.990 74.009 74.014
## 24 74.015 74.008 73.993 74.000 74.010
## 25 73.982 73.984 73.995 74.017 74.013
## 26 74.012 74.015 74.030 73.986 74.000
## 27 73.995 74.010 73.990 74.015 74.001
## 28 73.987 73.999 73.985 74.000 73.990
## 29 74.008 74.010 74.003 73.991 74.006
## 30 74.003 74.000 74.001 73.986 73.997
## 31 73.994 74.003 74.015 74.020 74.004
## 32 74.008 74.002 74.018 73.995 74.005
## 33 74.001 74.004 73.990 73.996 73.998
## 34 74.015 74.000 74.016 74.025 74.000
## 35 74.030 74.005 74.000 74.016 74.012
## 36 74.001 73.990 73.995 74.010 74.024
## 37 74.015 74.020 74.024 74.005 74.019
## 38 74.035 74.010 74.012 74.015 74.026
## 39 74.017 74.013 74.036 74.025 74.026
## 40 74.010 74.005 74.029 74.000 74.020</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" title="1"><span class="kw">dim</span>(diameter)</a></code></pre></div>
<pre><code>## [1] 40  5</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" title="1"><span class="co"># Se crea el objeto qcc y luego se utiliza como argumento de la función</span></a>
<a class="sourceLine" id="cb158-2" title="2"><span class="co"># oc.curves. </span></a>
<a class="sourceLine" id="cb158-3" title="3"><span class="kw">windows</span>()</a>
<a class="sourceLine" id="cb158-4" title="4"></a>
<a class="sourceLine" id="cb158-5" title="5">qcc.variables &lt;-<span class="st"> </span><span class="kw">qcc</span>(diameter, <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1"><span class="kw">oc.curves</span>(qcc.variables) <span class="co"># Representa las curvas características de </span></a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-39-2.png" width="672" /></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" title="1"><span class="co"># operación para el gráfico, variando en tamaño de muestra</span></a>
<a class="sourceLine" id="cb160-2" title="2"></a>
<a class="sourceLine" id="cb160-3" title="3"><span class="co"># Y otra forma es crearlo todo junto, del siguiente modo:</span></a>
<a class="sourceLine" id="cb160-4" title="4"></a>
<a class="sourceLine" id="cb160-5" title="5">beta1 &lt;-<span class="st"> </span><span class="kw">oc.curves</span>(<span class="kw">qcc</span>(diameter, <span class="dt">type=</span><span class="st">&quot;xbar&quot;</span>, <span class="dt">nsigmas=</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb160-6" title="6">                         <span class="dt">plot=</span><span class="ot">FALSE</span>),<span class="dt">n=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>)) </a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-39-3.png" width="672" /></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1"><span class="co"># Puedo elegir los tamaños muestrales variando &quot;n&quot;.</span></a>
<a class="sourceLine" id="cb161-2" title="2"></a>
<a class="sourceLine" id="cb161-3" title="3">beta1</a></code></pre></div>
<pre><code>##                sample size
## shift (std.dev)        n=1          n=5         n=10         n=15
##            0    0.99730020 9.973002e-01 9.973002e-01 9.973002e-01
##            0.05 0.99726692 9.971330e-01 9.969637e-01 9.967923e-01
##            0.1  0.99716658 9.966188e-01 9.959040e-01 9.951556e-01
##            0.15 0.99699769 9.957200e-01 9.939699e-01 9.920483e-01
##            0.2  0.99675773 9.943735e-01 9.909063e-01 9.868928e-01
##            0.25 0.99644321 9.924902e-01 9.863525e-01 9.788745e-01
##            0.3  0.99604960 9.899543e-01 9.798427e-01 9.669608e-01
##            0.35 0.99557135 9.866237e-01 9.708145e-01 9.499523e-01
##            0.4  0.99500188 9.823300e-01 9.586275e-01 9.265805e-01
##            0.45 0.99433356 9.768805e-01 9.425945e-01 8.956506e-01
##            0.5  0.99355771 9.700606e-01 9.220279e-01 8.562239e-01
##            0.55 0.99266457 9.616383e-01 8.962990e-01 8.078112e-01
##            0.6  0.99164336 9.513704e-01 8.649063e-01 7.505463e-01
##            0.65 0.99048217 9.390106e-01 8.275477e-01 6.852962e-01
##            0.7  0.98916809 9.243187e-01 7.841850e-01 6.136755e-01
##            0.75 0.98768711 9.070724e-01 7.350935e-01 5.379468e-01
##            0.8  0.98602420 8.870794e-01 6.808860e-01 4.608126e-01
##            0.85 0.98416333 8.641901e-01 6.225040e-01 3.851296e-01
##            0.9  0.98208748 8.383105e-01 5.611755e-01 3.135953e-01
##            0.95 0.97977871 8.094129e-01 4.983389e-01 2.484631e-01
##            1    0.97721820 7.775460e-01 4.355436e-01 1.913361e-01
##            1.05 0.97438633 7.428409e-01 3.743358e-01 1.430689e-01
##            1.1  0.97126278 7.055136e-01 3.161453e-01 1.037839e-01
##            1.15 0.96782660 6.658644e-01 2.621864e-01 7.298274e-02
##            1.2  0.96405634 6.242714e-01 2.133844e-01 4.971944e-02
##            1.25 0.95993015 5.811807e-01 1.703338e-01 3.279399e-02
##            1.3  0.95542600 5.370926e-01 1.332926e-01 2.093156e-02
##            1.35 0.95052173 4.925435e-01 1.022072e-01 1.292268e-02
##            1.4  0.94519530 4.480873e-01 7.676275e-02 7.713924e-03
##            1.45 0.93942495 4.042744e-01 5.644880e-02 4.450597e-03
##            1.5  0.93318940 3.616312e-01 4.063044e-02 2.481118e-03
##            1.55 0.92646806 3.206416e-01 2.861629e-02 1.336117e-03
##            1.6  0.91924123 2.817304e-01 1.971628e-02 6.948704e-04
##            1.65 0.91149035 2.452505e-01 1.328566e-02 3.489249e-04
##            1.7  0.90319821 2.114745e-01 8.753767e-03 1.691396e-04
##            1.75 0.89434921 1.805900e-01 5.638663e-03 7.913507e-05
##            1.8  0.88492954 1.526999e-01 3.550185e-03 3.573024e-05
##            1.85 0.87492745 1.278265e-01 2.184493e-03 1.556632e-05
##            1.9  0.86433346 1.059187e-01 1.313449e-03 6.542812e-06
##            1.95 0.85314057 8.686236e-02 7.715821e-04 2.652909e-06
##            2    0.84134446 7.049208e-02 4.427983e-04 1.037564e-06
##            2.05 0.82894365 5.660376e-02 2.482207e-04 3.913831e-07
##            2.1  0.81593970 4.496730e-02 1.359050e-04 1.423792e-07
##            2.15 0.80233733 3.533858e-02 7.267075e-05 4.994766e-08
##            2.2  0.78814450 2.747006e-02 3.794674e-05 1.689573e-08
##            2.25 0.77337257 2.111974e-02 1.934850e-05 5.510659e-09
##            2.3  0.75803629 1.605830e-02 9.632705e-06 1.732884e-09
##            2.35 0.74215385 1.207421e-02 4.682193e-06 5.253525e-10
##            2.4  0.72574685 8.977056e-03 2.221903e-06 1.535414e-10
##            2.45 0.70884029 6.599274e-03 1.029324e-06 4.325872e-11
##            2.5  0.69146244 4.796428e-03 4.654875e-07 1.174834e-11
##            2.55 0.67364477 3.446464e-03 2.054817e-07 3.075504e-12
##            2.6  0.65542173 2.448161e-03 8.853782e-08 7.760279e-13
##            2.65 0.63683064 1.719073e-03 3.723551e-08 1.887316e-13
##            2.7  0.61791142 1.193208e-03 1.528420e-08 4.423888e-14
##            2.75 0.59870632 8.186271e-04 6.123076e-09 9.994083e-15
##            2.8  0.57925971 5.551191e-04 2.394001e-09 2.175950e-15
##            2.85 0.55961769 3.720484e-04 9.134680e-10 4.565737e-16
##            2.9  0.53982784 2.464393e-04 3.401454e-10 9.232474e-17
##            2.95 0.51993880 1.613254e-04 1.236023e-10 1.799122e-17
##            3    0.50000000 1.043673e-04 4.382971e-11 3.378541e-18
##            3.05 0.48006119 6.672385e-05 1.516632e-11 6.113855e-19
##            3.1  0.46017216 4.215422e-05 5.120972e-12 1.066130e-19
##            3.15 0.44038231 2.631676e-05 1.687236e-12 1.791456e-20
##            3.2  0.42074029 1.623470e-05 5.424280e-13 2.900657e-21
##            3.25 0.40129367 9.896157e-06 1.701545e-13 4.525573e-22
##            3.3  0.38208858 5.960591e-06 5.208017e-14 6.803483e-23
##            3.35 0.36316935 3.547346e-06 1.555327e-14 9.855156e-24
##            3.4  0.34457826 2.085934e-06 4.531947e-15 1.375511e-24
##            3.45 0.32635522 1.211915e-06 1.288414e-15 1.849814e-25
##            3.5  0.30853754 6.956814e-07 3.573777e-16 2.396898e-26
##            3.55 0.29115969 3.945556e-07 9.671533e-17 2.992429e-27
##            3.6  0.27425312 2.210847e-07 2.553604e-17 3.599534e-28
##            3.65 0.25784611 1.223925e-07 6.578049e-18 4.171693e-29
##            3.7  0.24196365 6.694082e-08 1.653183e-18 4.658195e-30
##            3.75 0.22662735 3.617102e-08 4.053413e-19 5.011392e-31
##            3.8  0.21185540 1.930895e-08 9.695988e-20 5.194340e-32
##            3.85 0.19766254 1.018308e-08 2.262719e-20 5.187166e-33
##            3.9  0.18406013 5.305393e-09 5.151483e-21 4.990615e-34
##            3.95 0.17105613 2.730666e-09 1.144178e-21 4.625927e-35
##            4    0.15865525 1.388442e-09 2.479194e-22 4.131056e-36
##            4.05 0.14685906 6.974136e-10 5.240585e-23 3.554168e-37
##            4.1  0.13566606 3.460610e-10 1.080683e-23 2.945957e-38
##            4.15 0.12507194 1.696330e-10 2.174015e-24 2.352467e-39
##            4.2  0.11506967 8.214093e-11 4.266479e-25 1.809784e-40
##            4.25 0.10564977 3.929133e-11 8.168018e-26 1.341324e-41
##            4.3  0.09680048 1.856600e-11 1.525460e-26 9.577262e-43
##            4.35 0.08850799 8.666044e-12 2.779199e-27 6.587912e-44
##            4.4  0.08075666 3.995777e-12 4.939356e-28 4.365666e-45
##            4.45 0.07352926 1.819937e-12 8.563484e-29 2.787067e-46
##            4.5  0.06680720 8.188099e-13 1.448298e-29 1.714101e-47
##            4.55 0.06057076 3.638973e-13 2.389407e-30 1.015583e-48
##            4.6  0.05479929 1.597499e-13 3.845431e-31 5.796721e-50
##            4.65 0.04947147 6.927333e-14 6.036992e-32 3.187393e-51
##            4.7  0.04456546 2.967239e-14 9.245168e-33 1.688392e-52
##            4.75 0.04005916 1.255445e-14 1.381102e-33 8.615760e-54
##            4.8  0.03593032 5.246855e-15 2.012572e-34 4.235404e-55
##            4.85 0.03215677 2.165981e-15 2.860817e-35 2.005744e-56
##            4.9  0.02871656 8.832060e-16 3.966799e-36 9.150272e-58
##            4.95 0.02558806 3.557290e-16 5.365373e-37 4.021321e-59
##            5    0.02275013 1.415222e-16 7.078931e-38 1.702466e-60
##                sample size
## shift (std.dev)         n=20          n=25
##            0    9.973002e-01  9.973002e-01
##            0.05 9.966188e-01  9.964432e-01
##            0.1  9.943735e-01  9.935577e-01
##            0.15 9.899543e-01  9.876871e-01
##            0.2  9.823300e-01  9.772182e-01
##            0.25 9.700606e-01  9.599302e-01
##            0.3  9.513704e-01  9.331894e-01
##            0.35 9.243187e-01  8.943492e-01
##            0.4  8.870794e-01  8.413445e-01
##            0.45 8.383105e-01  7.733726e-01
##            0.5  7.775460e-01  6.914624e-01
##            0.55 7.055136e-01  5.987063e-01
##            0.6  6.242714e-01  5.000000e-01
##            0.65 5.370926e-01  4.012937e-01
##            0.7  4.480873e-01  3.085375e-01
##            0.75 3.616312e-01  2.266274e-01
##            0.8  2.817304e-01  1.586553e-01
##            0.85 2.114745e-01  1.056498e-01
##            0.9  1.526999e-01  6.680720e-02
##            0.95 1.059187e-01  4.005916e-02
##            1    7.049208e-02  2.275013e-02
##            1.05 4.496730e-02  1.222447e-02
##            1.1  2.747006e-02  6.209665e-03
##            1.15 1.605830e-02  2.979763e-03
##            1.2  8.977056e-03  1.349898e-03
##            1.25 4.796428e-03  5.770250e-04
##            1.3  2.448161e-03  2.326291e-04
##            1.35 1.193208e-03  8.841729e-05
##            1.4  5.551191e-04  3.167124e-05
##            1.45 2.464393e-04  1.068853e-05
##            1.5  1.043673e-04  3.397673e-06
##            1.55 4.215422e-05  1.017083e-06
##            1.6  1.623470e-05  2.866516e-07
##            1.65 5.960591e-06  7.604961e-08
##            1.7  2.085934e-06  1.898956e-08
##            1.75 6.956814e-07  4.462172e-09
##            1.8  2.210847e-07  9.865876e-10
##            1.85 6.694082e-08  2.052263e-10
##            1.9  1.930895e-08  4.016001e-11
##            1.95 5.305393e-09  7.392258e-12
##            2    1.388442e-09  1.279813e-12
##            2.05 3.460610e-10  2.083858e-13
##            2.1  8.214093e-11  3.190892e-14
##            2.15 1.856600e-11  4.594627e-15
##            2.2  3.995777e-12  6.220961e-16
##            2.25 8.188099e-13  7.919726e-17
##            2.3  1.597499e-13  9.479535e-18
##            2.35 2.967239e-14  1.066764e-18
##            2.4  5.246855e-15  1.128588e-19
##            2.45 8.832060e-16  1.122463e-20
##            2.5  1.415222e-16  1.049452e-21
##            2.55 2.158594e-17  9.223414e-23
##            2.6  3.133911e-18  7.619853e-24
##            2.65 4.330703e-19  5.917177e-25
##            2.7  5.696045e-20  4.319006e-26
##            2.75 7.130499e-21  2.963081e-27
##            2.8  8.495462e-22  1.910660e-28
##            2.85 9.633063e-23  1.157960e-29
##            2.9  1.039543e-23  6.595771e-31
##            2.95 1.067609e-24  3.530942e-32
##            3    1.043434e-25  1.776482e-33
##            3.05 9.704940e-27  8.399796e-35
##            3.1  8.589907e-28  3.732564e-36
##            3.15 7.235101e-29  1.558726e-37
##            3.2  5.799020e-30  6.117164e-39
##            3.25 4.422952e-31  2.256016e-40
##            3.3  3.210047e-32  7.818807e-42
##            3.35 2.216902e-33  2.546476e-43
##            3.4  1.456841e-34  7.793537e-45
##            3.45 9.109685e-36  2.241406e-46
##            3.5  5.420199e-37  6.057495e-48
##            3.55 3.068621e-38  1.538324e-49
##            3.6  1.653038e-39  3.670966e-51
##            3.65 8.472864e-41  8.231656e-53
##            3.7  4.132199e-42  1.734461e-54
##            3.75 1.917486e-43  3.434066e-56
##            3.8  8.466023e-45  6.388754e-58
##            3.85 3.556474e-46  1.116822e-59
##            3.9  1.421508e-47  1.834463e-61
##            3.95 5.405872e-49  2.831314e-63
##            4    1.955985e-50  4.105996e-65
##            4.05 6.733582e-52  5.594968e-67
##            4.1  2.205488e-53  7.163459e-69
##            4.15 6.872877e-55  8.617701e-71
##            4.2  2.037723e-56  9.740949e-73
##            4.25 5.748074e-58  1.034546e-74
##            4.3  1.542651e-59  1.032370e-76
##            4.35 3.938934e-61  9.679551e-79
##            4.4  9.568715e-63  8.527224e-81
##            4.45 2.211517e-64  7.058147e-83
##            4.5  4.862802e-66  5.489115e-85
##            4.55 1.017281e-67  4.010892e-87
##            4.6  2.024655e-69  2.753624e-89
##            4.65 3.833678e-71  1.776200e-91
##            4.7  6.906098e-73  1.076467e-93
##            4.75 1.183589e-74  6.129572e-96
##            4.8  1.929826e-76  3.279278e-98
##            4.85 2.993530e-78 1.648328e-100
##            4.9  4.417691e-80 7.784397e-103
##            4.95 6.202289e-82 3.453988e-105
##            5    8.284234e-84 1.439892e-107</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1"><span class="co"># Average run length (ARL): muestras necesarias hasta la primera </span></a>
<a class="sourceLine" id="cb163-2" title="2"><span class="co"># fuera de los límites de control</span></a>
<a class="sourceLine" id="cb163-3" title="3"></a>
<a class="sourceLine" id="cb163-4" title="4">ARL=<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>beta1)</a>
<a class="sourceLine" id="cb163-5" title="5"></a>
<a class="sourceLine" id="cb163-6" title="6">ARL</a></code></pre></div>
<pre><code>##                sample size
## shift (std.dev)        n=1        n=5       n=10       n=15       n=20
##            0    370.398347 370.398347 370.398347 370.398347 370.398347
##            0.05 365.888042 348.793060 329.343558 311.746066 295.751245
##            0.1  352.930815 295.751245 244.138167 206.423621 177.731939
##            0.15 333.076446 233.645820 165.833615 125.759709  99.545446
##            0.2  308.426052 177.731939 109.966815  76.293826  56.593243
##            0.25 281.152524 133.159432  73.273472  47.336210  33.400779
##            0.3  253.139054  99.545446  49.609699  30.267032  20.563623
##            0.35 225.802632  74.759150  34.263577  19.980947  13.213299
##            0.4  200.075337  56.593243  24.170630  13.620351   8.855777
##            0.45 176.477671  43.253572  17.419934   9.583193   6.184692
##            0.5  155.224201  33.400779  12.825107   6.955257   4.495312
##            0.55 136.324728  26.067652   9.643106   5.203216   3.395742
##            0.6  119.665255  20.563623   7.402271   4.008760   2.661495
##            0.65 105.066013  16.396286   5.798704   3.177591   2.160259
##            0.7   92.319824  13.213299   4.633598   2.588498   1.811881
##            0.75  81.215702  10.761063   3.774917   2.164253   1.566493
##            0.8   71.552277   8.855777   3.133676   1.854643   1.392235
##            0.85  63.144603   7.363234   2.649035   1.626359   1.268190
##            0.9   55.826884   6.184692   2.278815   1.456866   1.180219
##            0.95  49.452827   5.246945   1.993378   1.330607   1.118466
##            1     43.894682   4.495312   1.771616   1.236608   1.075838
##            1.05  39.041655   3.888643   1.598301   1.166955   1.047085
##            1.1   34.798080   3.395742   1.462299   1.115802   1.028246
##            1.15  31.081578   2.992797   1.355356   1.078729   1.016320
##            1.2   27.821314   2.661495   1.271269   1.052321   1.009058
##            1.25  24.956423   2.387665   1.205304   1.033906   1.004820
##            1.3   22.434602   2.160259   1.153792   1.021379   1.002454
##            1.35  20.210891   1.970612   1.113843   1.013092   1.001195
##            1.4   18.246609   1.811881   1.083145   1.007774   1.000555
##            1.45  16.508447   1.678625   1.059826   1.004470   1.000247
##            1.5   14.967685   1.566493   1.042351   1.002487   1.000104
##            1.55  13.599532   1.471977   1.029459   1.001338   1.000042
##            1.6   12.382556   1.392235   1.020113   1.000695   1.000016
##            1.65  11.298203   1.324943   1.013465   1.000349   1.000006
##            1.7   10.330388   1.268190   1.008831   1.000169   1.000002
##            1.75   9.465144   1.220390   1.005671   1.000079   1.000001
##            1.8    8.690327   1.180219   1.003563   1.000036   1.000000
##            1.85   7.995359   1.146561   1.002189   1.000016   1.000000
##            1.9    7.371014   1.118466   1.001315   1.000007   1.000000
##            1.95   6.809233   1.095125   1.000772   1.000003   1.000000
##            2      6.302963   1.075838   1.000443   1.000001   1.000000
##            2.05   5.846027   1.060000   1.000248   1.000000   1.000000
##            2.1    5.433002   1.047085   1.000136   1.000000   1.000000
##            2.15   5.059124   1.036633   1.000073   1.000000   1.000000
##            2.2    4.720198   1.028246   1.000038   1.000000   1.000000
##            2.25   4.412529   1.021575   1.000019   1.000000   1.000000
##            2.3    4.132851   1.016320   1.000010   1.000000   1.000000
##            2.35   3.878282   1.012222   1.000005   1.000000   1.000000
##            2.4    3.646266   1.009058   1.000002   1.000000   1.000000
##            2.45   3.434541   1.006643   1.000001   1.000000   1.000000
##            2.5    3.241097   1.004820   1.000000   1.000000   1.000000
##            2.55   3.064146   1.003458   1.000000   1.000000   1.000000
##            2.6    2.902098   1.002454   1.000000   1.000000   1.000000
##            2.65   2.753536   1.001722   1.000000   1.000000   1.000000
##            2.7    2.617194   1.001195   1.000000   1.000000   1.000000
##            2.75   2.491941   1.000819   1.000000   1.000000   1.000000
##            2.8    2.376763   1.000555   1.000000   1.000000   1.000000
##            2.85   2.270754   1.000372   1.000000   1.000000   1.000000
##            2.9    2.173100   1.000247   1.000000   1.000000   1.000000
##            2.95   2.083068   1.000161   1.000000   1.000000   1.000000
##            3      2.000000   1.000104   1.000000   1.000000   1.000000
##            3.05   1.923303   1.000067   1.000000   1.000000   1.000000
##            3.1    1.852442   1.000042   1.000000   1.000000   1.000000
##            3.15   1.786934   1.000026   1.000000   1.000000   1.000000
##            3.2    1.726341   1.000016   1.000000   1.000000   1.000000
##            3.25   1.670268   1.000010   1.000000   1.000000   1.000000
##            3.3    1.618355   1.000006   1.000000   1.000000   1.000000
##            3.35   1.570276   1.000004   1.000000   1.000000   1.000000
##            3.4    1.525735   1.000002   1.000000   1.000000   1.000000
##            3.45   1.484462   1.000001   1.000000   1.000000   1.000000
##            3.5    1.446210   1.000001   1.000000   1.000000   1.000000
##            3.55   1.410755   1.000000   1.000000   1.000000   1.000000
##            3.6    1.377891   1.000000   1.000000   1.000000   1.000000
##            3.65   1.347429   1.000000   1.000000   1.000000   1.000000
##            3.7    1.319198   1.000000   1.000000   1.000000   1.000000
##            3.75   1.293038   1.000000   1.000000   1.000000   1.000000
##            3.8    1.268803   1.000000   1.000000   1.000000   1.000000
##            3.85   1.246358   1.000000   1.000000   1.000000   1.000000
##            3.9    1.225581   1.000000   1.000000   1.000000   1.000000
##            3.95   1.206354   1.000000   1.000000   1.000000   1.000000
##            4      1.188573   1.000000   1.000000   1.000000   1.000000
##            4.05   1.172139   1.000000   1.000000   1.000000   1.000000
##            4.1    1.156960   1.000000   1.000000   1.000000   1.000000
##            4.15   1.142951   1.000000   1.000000   1.000000   1.000000
##            4.2    1.130032   1.000000   1.000000   1.000000   1.000000
##            4.25   1.118130   1.000000   1.000000   1.000000   1.000000
##            4.3    1.107175   1.000000   1.000000   1.000000   1.000000
##            4.35   1.097102   1.000000   1.000000   1.000000   1.000000
##            4.4    1.087851   1.000000   1.000000   1.000000   1.000000
##            4.45   1.079365   1.000000   1.000000   1.000000   1.000000
##            4.5    1.071590   1.000000   1.000000   1.000000   1.000000
##            4.55   1.064476   1.000000   1.000000   1.000000   1.000000
##            4.6    1.057976   1.000000   1.000000   1.000000   1.000000
##            4.65   1.052046   1.000000   1.000000   1.000000   1.000000
##            4.7    1.046644   1.000000   1.000000   1.000000   1.000000
##            4.75   1.041731   1.000000   1.000000   1.000000   1.000000
##            4.8    1.037269   1.000000   1.000000   1.000000   1.000000
##            4.85   1.033225   1.000000   1.000000   1.000000   1.000000
##            4.9    1.029566   1.000000   1.000000   1.000000   1.000000
##            4.95   1.026260   1.000000   1.000000   1.000000   1.000000
##            5      1.023280   1.000000   1.000000   1.000000   1.000000
##                sample size
## shift (std.dev)       n=25
##            0    370.398347
##            0.05 281.152524
##            0.1  155.224201
##            0.15  81.215702
##            0.2   43.894682
##            0.25  24.956423
##            0.3   14.967685
##            0.35   9.465144
##            0.4    6.302963
##            0.45   4.412529
##            0.5    3.241097
##            0.55   2.491941
##            0.6    2.000000
##            0.65   1.670268
##            0.7    1.446210
##            0.75   1.293038
##            0.8    1.188573
##            0.85   1.118130
##            0.9    1.071590
##            0.95   1.041731
##            1      1.023280
##            1.05   1.012376
##            1.1    1.006248
##            1.15   1.002989
##            1.2    1.001352
##            1.25   1.000577
##            1.3    1.000233
##            1.35   1.000088
##            1.4    1.000032
##            1.45   1.000011
##            1.5    1.000003
##            1.55   1.000001
##            1.6    1.000000
##            1.65   1.000000
##            1.7    1.000000
##            1.75   1.000000
##            1.8    1.000000
##            1.85   1.000000
##            1.9    1.000000
##            1.95   1.000000
##            2      1.000000
##            2.05   1.000000
##            2.1    1.000000
##            2.15   1.000000
##            2.2    1.000000
##            2.25   1.000000
##            2.3    1.000000
##            2.35   1.000000
##            2.4    1.000000
##            2.45   1.000000
##            2.5    1.000000
##            2.55   1.000000
##            2.6    1.000000
##            2.65   1.000000
##            2.7    1.000000
##            2.75   1.000000
##            2.8    1.000000
##            2.85   1.000000
##            2.9    1.000000
##            2.95   1.000000
##            3      1.000000
##            3.05   1.000000
##            3.1    1.000000
##            3.15   1.000000
##            3.2    1.000000
##            3.25   1.000000
##            3.3    1.000000
##            3.35   1.000000
##            3.4    1.000000
##            3.45   1.000000
##            3.5    1.000000
##            3.55   1.000000
##            3.6    1.000000
##            3.65   1.000000
##            3.7    1.000000
##            3.75   1.000000
##            3.8    1.000000
##            3.85   1.000000
##            3.9    1.000000
##            3.95   1.000000
##            4      1.000000
##            4.05   1.000000
##            4.1    1.000000
##            4.15   1.000000
##            4.2    1.000000
##            4.25   1.000000
##            4.3    1.000000
##            4.35   1.000000
##            4.4    1.000000
##            4.45   1.000000
##            4.5    1.000000
##            4.55   1.000000
##            4.6    1.000000
##            4.65   1.000000
##            4.7    1.000000
##            4.75   1.000000
##            4.8    1.000000
##            4.85   1.000000
##            4.9    1.000000
##            4.95   1.000000
##            5      1.000000</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" title="1"><span class="kw">matplot</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="dt">length=</span><span class="dv">101</span>),ARL,<span class="dt">col=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>),<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,</a>
<a class="sourceLine" id="cb165-2" title="2">        <span class="dt">lty=</span><span class="dv">1</span>,<span class="dt">xlab=</span><span class="st">&quot;Desviaciones de la media medidas en nº desv. tipicas&quot;</span>)</a>
<a class="sourceLine" id="cb165-3" title="3"><span class="kw">legend</span>(<span class="dv">2</span>,<span class="dv">300</span>,<span class="kw">c</span>(<span class="st">&quot;n=1&quot;</span>,<span class="st">&quot;n=5&quot;</span>,<span class="st">&quot;n=10&quot;</span>,<span class="st">&quot;n=15&quot;</span>,<span class="st">&quot;n=20&quot;</span>,<span class="st">&quot;n=25&quot;</span>),</a>
<a class="sourceLine" id="cb165-4" title="4">       <span class="dt">col=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>),<span class="dt">lty=</span><span class="dv">1</span>,<span class="dt">lwd=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-39-4.png" width="672" /></p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1"><span class="kw">detach</span>(pistonrings)</a></code></pre></div>
<p>Si es por atributos</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" title="1"><span class="co">## Curvas características para un grafico p ##</span></a>
<a class="sourceLine" id="cb167-2" title="2"></a>
<a class="sourceLine" id="cb167-3" title="3"><span class="kw">data</span>(orangejuice)</a>
<a class="sourceLine" id="cb167-4" title="4"><span class="kw">attach</span>(orangejuice)</a></code></pre></div>
<pre><code>## The following object is masked _by_ .GlobalEnv:
## 
##     sample</code></pre>
<pre><code>## The following objects are masked from pistonrings:
## 
##     sample, trial</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1"><span class="co"># Primero se realiza el gráfico de control:</span></a>
<a class="sourceLine" id="cb170-2" title="2"><span class="kw">qcc</span>(D[trial], <span class="dt">sizes=</span>size[trial], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = D[trial], type = &quot;p&quot;, sizes = size[trial], plot = TRUE)
##  $ type      : chr &quot;p&quot;
##  $ data.name : chr &quot;D[trial]&quot;
##  $ data      : int [1:30, 1] 12 15 8 10 4 7 16 9 14 10 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:30] 0.24 0.3 0.16 0.2 0.08 0.14 0.32 0.18 0.28 0.2 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:30] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:30] 50 50 50 50 50 50 50 50 50 50 ...
##  $ center    : num 0.231
##  $ std.dev   : num 0.422
##  $ nsigmas   : num 3
##  $ limits    : num [1:30, 1:2] 0.0524 0.0524 0.0524 0.0524 0.0524 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1"><span class="co"># Se eliminan los puntos fuera de control y se recalculan los límit es</span></a>
<a class="sourceLine" id="cb172-2" title="2">nuevos2 &lt;-<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">which</span>(trial), <span class="kw">c</span>(<span class="dv">15</span>,<span class="dv">21</span>,<span class="dv">23</span>)) </a>
<a class="sourceLine" id="cb172-3" title="3"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb172-4" title="4">qcc.nuev.atributos &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2],<span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-40-2.png" width="672" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" title="1"><span class="co"># Curva OC a partir de los resultados del grafico de control:</span></a>
<a class="sourceLine" id="cb173-2" title="2">beta &lt;-<span class="st"> </span><span class="kw">oc.curves</span>(<span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">plot=</span><span class="ot">FALSE</span>))</a></code></pre></div>
<pre><code>## Warning in oc.curves.p(object, ...): Some computed values for the type
## II error have been rounded due to the discreteness of the binomial
## distribution. Thus, some ARL values might be meaningless.</code></pre>
<p><img src="Control_book_files/figure-html/unnamed-chunk-40-3.png" width="672" /></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" title="1"><span class="kw">print</span>(<span class="kw">round</span>(beta, <span class="dt">digits=</span><span class="dv">4</span>))</a></code></pre></div>
<pre><code>##      0   0.01   0.02   0.03   0.04   0.05   0.06   0.07   0.08   0.09 
## 0.0000 0.3950 0.6358 0.7819 0.8701 0.9231 0.9547 0.9734 0.9845 0.9910 
##    0.1   0.11   0.12   0.13   0.14   0.15   0.16   0.17   0.18   0.19 
## 0.9948 0.9971 0.9983 0.9991 0.9995 0.9997 0.9998 0.9998 0.9997 0.9995 
##    0.2   0.21   0.22   0.23   0.24   0.25   0.26   0.27   0.28   0.29 
## 0.9991 0.9982 0.9969 0.9946 0.9912 0.9861 0.9788 0.9686 0.9551 0.9374 
##    0.3   0.31   0.32   0.33   0.34   0.35   0.36   0.37   0.38   0.39 
## 0.9152 0.8879 0.8553 0.8174 0.7743 0.7264 0.6745 0.6195 0.5624 0.5043 
##    0.4   0.41   0.42   0.43   0.44   0.45   0.46   0.47   0.48   0.49 
## 0.4465 0.3901 0.3362 0.2857 0.2392 0.1974 0.1604 0.1282 0.1009 0.0781 
##    0.5   0.51   0.52   0.53   0.54   0.55   0.56   0.57   0.58   0.59 
## 0.0595 0.0445 0.0327 0.0236 0.0167 0.0116 0.0079 0.0053 0.0034 0.0022 
##    0.6   0.61   0.62   0.63   0.64   0.65   0.66   0.67   0.68   0.69 
## 0.0014 0.0008 0.0005 0.0003 0.0002 0.0001 0.0000 0.0000 0.0000 0.0000 
##    0.7   0.71   0.72   0.73   0.74   0.75   0.76   0.77   0.78   0.79 
## 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 
##    0.8   0.81   0.82   0.83   0.84   0.85   0.86   0.87   0.88   0.89 
## 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 
##    0.9   0.91   0.92   0.93   0.94   0.95   0.96   0.97   0.98   0.99 
## 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 
##      1 
## 0.0000</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb177-2" title="2">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb177-3" title="3"><span class="kw">oc.curves</span>(<span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">plot=</span><span class="ot">FALSE</span>))</a></code></pre></div>
<pre><code>## Warning in oc.curves.p(object, ...): Some computed values for the type
## II error have been rounded due to the discreteness of the binomial
## distribution. Thus, some ARL values might be meaningless.</code></pre>
<p><img src="Control_book_files/figure-html/unnamed-chunk-40-4.png" width="672" /></p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" title="1"><span class="co"># Curva ARL:</span></a>
<a class="sourceLine" id="cb179-2" title="2"><span class="kw">plot</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dt">length=</span><span class="dv">101</span>),<span class="kw">as.numeric</span>(<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>beta)),<span class="dt">type=</span><span class="st">&quot;l&quot;</span>, </a>
<a class="sourceLine" id="cb179-3" title="3"><span class="dt">ylab=</span><span class="st">&quot;Average Run Length to detect shift, ARL&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;p&quot;</span> )</a>
<a class="sourceLine" id="cb179-4" title="4"><span class="kw">par</span>(op)</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-40-5.png" width="672" /></p>
<p><em>NOTA</em>: debido a que la función oc.curves utiliza distribución binomial en lugar de la aproximación normal, se #obtiene un valor de la proporción media diferente a la que proporciona el gráfico de control y, además, el ARL obenido para esa media no se corresponde con 1/0.0027=370 para una distancia de 3*sigma.</p>
<p>SEGUIDAMENTE SE MUESTRA UN SCRIPT QUE UTILIZA LA APROXIMACIÓN NORMAL:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1"><span class="kw">data</span>(orangejuice)</a>
<a class="sourceLine" id="cb180-2" title="2"><span class="kw">attach</span>(orangejuice)</a></code></pre></div>
<pre><code>## The following object is masked _by_ .GlobalEnv:
## 
##     sample</code></pre>
<pre><code>## The following objects are masked from orangejuice (pos = 3):
## 
##     D, sample, size, trial</code></pre>
<pre><code>## The following objects are masked from pistonrings:
## 
##     sample, trial</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="co"># gráfico de control:</span></a>
<a class="sourceLine" id="cb184-2" title="2">obj.qcc &lt;-<span class="st"> </span><span class="kw">qcc</span>(D[nuevos2], <span class="dt">sizes=</span>size[nuevos2], <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">plot=</span><span class="ot">TRUE</span>) </a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" title="1"><span class="co"># p.hat: la proporción de errores media por muestra</span></a>
<a class="sourceLine" id="cb185-2" title="2"><span class="co"># LI, LS: límites de control naturales</span></a>
<a class="sourceLine" id="cb185-3" title="3"><span class="co"># sd: desviación típica de la aproximación normal</span></a>
<a class="sourceLine" id="cb185-4" title="4"></a>
<a class="sourceLine" id="cb185-5" title="5">p.hat &lt;-<span class="st"> </span>obj.qcc<span class="op">$</span>center</a>
<a class="sourceLine" id="cb185-6" title="6">n &lt;-<span class="kw">mean</span>(size)</a>
<a class="sourceLine" id="cb185-7" title="7">varianza.hat &lt;-<span class="st"> </span>((p.hat)<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>p.hat))<span class="op">/</span>n</a>
<a class="sourceLine" id="cb185-8" title="8">sd &lt;-<span class="st"> </span><span class="kw">sqrt</span>(varianza.hat)</a>
<a class="sourceLine" id="cb185-9" title="9">nsigma=<span class="dv">3</span></a>
<a class="sourceLine" id="cb185-10" title="10"></a>
<a class="sourceLine" id="cb185-11" title="11">LI &lt;-<span class="st"> </span>p.hat<span class="op">-</span>nsigma<span class="op">*</span>sd</a>
<a class="sourceLine" id="cb185-12" title="12"></a>
<a class="sourceLine" id="cb185-13" title="13">LS &lt;-<span class="st"> </span>p.hat<span class="op">+</span>nsigma<span class="op">*</span>sd</a>
<a class="sourceLine" id="cb185-14" title="14"></a>
<a class="sourceLine" id="cb185-15" title="15"><span class="co"># Diferentes valores de la proporción de errores:</span></a>
<a class="sourceLine" id="cb185-16" title="16"></a>
<a class="sourceLine" id="cb185-17" title="17">p &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.01</span>)</a>
<a class="sourceLine" id="cb185-18" title="18"></a>
<a class="sourceLine" id="cb185-19" title="19"></a>
<a class="sourceLine" id="cb185-20" title="20"><span class="co">#Definimos una función para calcular los beta (ERROR TIPO II) con el TCL</span></a>
<a class="sourceLine" id="cb185-21" title="21"></a>
<a class="sourceLine" id="cb185-22" title="22">beta.norm &lt;-<span class="st"> </span><span class="cf">function</span>(p.hat,sd,LI,LS){</a>
<a class="sourceLine" id="cb185-23" title="23">  b &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">pnorm</span>(LS, <span class="dt">mean =</span> p.hat,<span class="dt">sd =</span> sd )<span class="op">-</span><span class="kw">pnorm</span>(LI, <span class="dt">mean =</span> p.hat,<span class="dt">sd =</span> sd )</a>
<a class="sourceLine" id="cb185-24" title="24">       ,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb185-25" title="25">  <span class="kw">return</span>(b)</a>
<a class="sourceLine" id="cb185-26" title="26">}</a>
<a class="sourceLine" id="cb185-27" title="27">  </a>
<a class="sourceLine" id="cb185-28" title="28">beta &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="kw">as.matrix</span>(p),<span class="dv">1</span>,beta.norm,sd,LI,LS)</a>
<a class="sourceLine" id="cb185-29" title="29"></a>
<a class="sourceLine" id="cb185-30" title="30"><span class="kw">windows</span>(<span class="dv">19</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb185-31" title="31">op=<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb185-32" title="32"><span class="co">#Realizamos el gráfico</span></a>
<a class="sourceLine" id="cb185-33" title="33"><span class="kw">plot</span>(p, beta, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb185-34" title="34">     <span class="dt">main =</span> <span class="st">&quot;OC curves for disconformities proportion using TCL&quot;</span>, </a>
<a class="sourceLine" id="cb185-35" title="35">     <span class="dt">xlab =</span> <span class="kw">expression</span>(p), <span class="dt">ylab =</span> <span class="st">&quot;Prob. type II error &quot;</span>)</a>
<a class="sourceLine" id="cb185-36" title="36"><span class="co">#rect(par(&quot;usr&quot;)[1], par(&quot;usr&quot;)[3], par(&quot;usr&quot;)[2], par(&quot;usr&quot;)[4], </span></a>
<a class="sourceLine" id="cb185-37" title="37"><span class="co">#     col = qcc.options(&quot;bg.figure&quot;))</span></a>
<a class="sourceLine" id="cb185-38" title="38"><span class="kw">lines</span>(p, beta)</a>
<a class="sourceLine" id="cb185-39" title="39"><span class="kw">lines</span>(<span class="kw">rep</span>(p[<span class="kw">which.max</span>(beta)], <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="kw">max</span>(beta)), <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb185-40" title="40"></a>
<a class="sourceLine" id="cb185-41" title="41"><span class="co"># Curva ARL:</span></a>
<a class="sourceLine" id="cb185-42" title="42"><span class="kw">plot</span>(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dt">length=</span><span class="dv">101</span>),<span class="kw">as.numeric</span>(<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>beta)),<span class="dt">type=</span><span class="st">&quot;l&quot;</span>, </a>
<a class="sourceLine" id="cb185-43" title="43"><span class="dt">ylab=</span><span class="st">&quot;Average Run Length to detect shift, ARL&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;p&quot;</span> )</a></code></pre></div>
<p><img src="Control_book_files/figure-html/unnamed-chunk-41-2.png" width="672" /></p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">par</span>(op)</a>
<a class="sourceLine" id="cb186-2" title="2"></a>
<a class="sourceLine" id="cb186-3" title="3"></a>
<a class="sourceLine" id="cb186-4" title="4"><span class="kw">detach</span>(orangejuice)</a>
<a class="sourceLine" id="cb186-5" title="5"></a>
<a class="sourceLine" id="cb186-6" title="6"><span class="co">## Curvas OC para un gráfico de control tipo c ############################</span></a>
<a class="sourceLine" id="cb186-7" title="7"></a>
<a class="sourceLine" id="cb186-8" title="8"><span class="kw">data</span>(circuit)</a>
<a class="sourceLine" id="cb186-9" title="9"><span class="kw">attach</span>(circuit)</a></code></pre></div>
<pre><code>## The following objects are masked _by_ .GlobalEnv:
## 
##     sample, x</code></pre>
<pre><code>## The following objects are masked from orangejuice:
## 
##     sample, size, trial</code></pre>
<pre><code>## The following objects are masked from pistonrings:
## 
##     sample, trial</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">windows</span>(<span class="dv">15</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb190-2" title="2">op&lt;-<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb190-3" title="3"><span class="co">#q &lt;- qcc(x[trial], sizes=size[trial], type=&quot;c&quot;, plot=TRUE)</span></a>
<a class="sourceLine" id="cb190-4" title="4"><span class="co">#beta &lt;- oc.curves(q)</span></a>
<a class="sourceLine" id="cb190-5" title="5"><span class="co">#print(round(beta, digits=4))par(op)</span></a>
<a class="sourceLine" id="cb190-6" title="6"></a>
<a class="sourceLine" id="cb190-7" title="7"><span class="kw">detach</span>(circuit)</a></code></pre></div>
<p>NOTA: debido a a que la función oc.curves distribución de poisson en lugar de la aproximación normal, se obtiene un valor del número de disconformidades diferente a la que proporciona el gráfico de control y, además, el
ARL obenido para esa media no se corresponde con 1/0.0027=370 para una distancia de 3*sigma</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="practica-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="practica-3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["Control_book.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
